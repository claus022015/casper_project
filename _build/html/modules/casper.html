<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The casper module &mdash; USDA Nutrition Database 1.1.0-DEV documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/jsdemo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0-DEV',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jsdemo.js"></script>
    <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
    <script type="text/javascript" src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <link rel="shortcut icon" href="../_static/casperjs-favicon.ico"/>
    <link rel="top" title="USDA Nutrition Database 1.1.0-DEV documentation" href="../index.html" />
    <link rel="up" title="API Documentation" href="index.html" />
    <link rel="next" title="The clientutils module" href="clientutils.html" />
    <link rel="prev" title="API Documentation" href="index.html" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic&amp;subset=latin,latin-ext">
    <link rel="stylesheet" title="Dark theme" href="../_static/casperjs-dark.css">
    <link rel="alternate stylesheet" title="Light theme" href="../_static/casperjs-light.css">
    <script type="text/javascript" src="../_static/style-switcher.js"></script>

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="clientutils.html" title="The clientutils module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">USDA Nutrition Database 1.1.0-DEV documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-casper-module">
<span id="casper-module"></span><h1>The <code class="docutils literal"><span class="pre">casper</span></code> module<a class="headerlink" href="#the-casper-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-casper-class">
<span id="index-0"></span><h2>The <code class="docutils literal"><span class="pre">Casper</span></code> class<a class="headerlink" href="#the-casper-class" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to get a casper instance is to use the module&#8217;s <code class="docutils literal"><span class="pre">create()</span></code> method:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>
</pre></div>
</div>
<p>But you can also retrieve the main Function and instantiate it by yourself:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">Casper</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Also, check out <code class="xref doc docutils literal"><span class="pre">how</span> <span class="pre">to</span> <span class="pre">extend</span> <span class="pre">Casper</span> <span class="pre">with</span> <span class="pre">your</span> <span class="pre">own</span> <span class="pre">methods</span></code>.</p>
</div>
<p>Both the <code class="docutils literal"><span class="pre">Casper</span></code> constructor and the <code class="docutils literal"><span class="pre">create()</span></code> function accept a single <code class="docutils literal"><span class="pre">options</span></code> argument which is a standard javascript object:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">verbose</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">logLevel</span><span class="o">:</span> <span class="s2">&quot;debug&quot;</span>
<span class="p">});</span>
</pre></div>
</div>
<span class="target" id="casper-options"></span></div>
<div class="section" id="index-1">
<span id="id1"></span><h2><code class="docutils literal"><span class="pre">Casper.options</span></code><a class="headerlink" href="#index-1" title="Permalink to this headline">¶</a></h2>
<p>An <code class="docutils literal"><span class="pre">options</span></code> object can be passed to the <code class="docutils literal"><span class="pre">Casper</span></code> constructor, eg.:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">clientScripts</span><span class="o">:</span>  <span class="p">[</span>
        <span class="s1">&#39;includes/jquery.js&#39;</span><span class="p">,</span>      <span class="c1">// These two scripts will be injected in remote</span>
        <span class="s1">&#39;includes/underscore.js&#39;</span>   <span class="c1">// DOM on every request</span>
    <span class="p">],</span>
    <span class="nx">pageSettings</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">loadImages</span><span class="o">:</span>  <span class="kc">false</span><span class="p">,</span>        <span class="c1">// The WebPage instance used by Casper will</span>
        <span class="nx">loadPlugins</span><span class="o">:</span> <span class="kc">false</span>         <span class="c1">// use these settings</span>
    <span class="p">},</span>
    <span class="nx">logLevel</span><span class="o">:</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span>              <span class="c1">// Only &quot;info&quot; level messages will be logged</span>
    <span class="nx">verbose</span><span class="o">:</span> <span class="kc">true</span>                  <span class="c1">// log messages will be printed out to the console</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can also alter options at runtime:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">waitTimeout</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
</pre></div>
</div>
<p>The whole list of available options is detailed below.</p>
<div class="section" id="clientscripts">
<span id="casper-option-clientscripts"></span><span id="index-2"></span><h3><code class="docutils literal"><span class="pre">clientScripts</span></code><a class="headerlink" href="#clientscripts" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Array</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">[]</span></code></p>
<p>A collection of script filepaths to include in every page loaded.</p>
</div>
<div class="section" id="exitonerror">
<span id="index-3"></span><h3><code class="docutils literal"><span class="pre">exitOnError</span></code><a class="headerlink" href="#exitonerror" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Boolean</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></p>
<p>Sets if CasperJS must exit when an uncaught error has been thrown by the script.</p>
</div>
<div class="section" id="httpstatushandlers">
<span id="index-4"></span><h3><code class="docutils literal"><span class="pre">httpStatusHandlers</span></code><a class="headerlink" href="#httpstatushandlers" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Object</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">{}</span></code></p>
<p>A javascript Object containing functions to call when a requested resource has a given HTTP status code. A dedicated sample is provided as an example.</p>
</div>
<div class="section" id="loglevel">
<span id="index-5"></span><h3><code class="docutils literal"><span class="pre">logLevel</span></code><a class="headerlink" href="#loglevel" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">String</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code></p>
<p>Logging level (see the logging section for more information)</p>
</div>
<div class="section" id="onalert">
<h3><code class="docutils literal"><span class="pre">onAlert</span></code><a class="headerlink" href="#onalert" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>A function to be called when a javascript alert() is triggered</p>
</div>
<div class="section" id="ondie">
<h3><code class="docutils literal"><span class="pre">onDie</span></code><a class="headerlink" href="#ondie" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>A function to be called when Casper#die() is called</p>
</div>
<div class="section" id="onerror">
<span id="index-6"></span><h3><code class="docutils literal"><span class="pre">onError</span></code><a class="headerlink" href="#onerror" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>A function to be called when an &#8220;error&#8221; level event occurs</p>
</div>
<div class="section" id="onloaderror">
<span id="index-7"></span><h3><code class="docutils literal"><span class="pre">onLoadError</span></code><a class="headerlink" href="#onloaderror" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>A function to be called when a requested resource cannot be loaded</p>
</div>
<div class="section" id="onpageinitialized">
<h3><code class="docutils literal"><span class="pre">onPageInitialized</span></code><a class="headerlink" href="#onpageinitialized" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>A function to be called after <code class="docutils literal"><span class="pre">WebPage</span></code> instance has been initialized</p>
</div>
<div class="section" id="onresourcereceived">
<span id="index-8"></span><h3><code class="docutils literal"><span class="pre">onResourceReceived</span></code><a class="headerlink" href="#onresourcereceived" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>Proxy method for PhantomJS&#8217; <code class="docutils literal"><span class="pre">WebPage#onResourceReceived()</span></code> callback, but the current Casper instance is passed as first argument.</p>
</div>
<div class="section" id="onresourcerequested">
<span id="index-9"></span><h3><code class="docutils literal"><span class="pre">onResourceRequested</span></code><a class="headerlink" href="#onresourcerequested" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>Proxy method for PhantomJS&#8217; WebPage#onResourceRequested() callback, but the current Casper instance is passed as first argument.</p>
</div>
<div class="section" id="onstepcomplete">
<span id="index-10"></span><h3><code class="docutils literal"><span class="pre">onStepComplete</span></code><a class="headerlink" href="#onstepcomplete" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>A function to be executed when a step function execution is finished.</p>
</div>
<div class="section" id="onsteptimeout">
<span id="index-11"></span><h3><code class="docutils literal"><span class="pre">onStepTimeout</span></code><a class="headerlink" href="#onsteptimeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p>A function to be executed when a step function execution time exceeds the value of the stepTimeout option, if any has been set.</p>
<p>By default, on timeout the script will exit displaying an error, except in test environment where it will just add a failure to the suite results.</p>
</div>
<div class="section" id="ontimeout">
<span id="index-12"></span><h3><code class="docutils literal"><span class="pre">onTimeout</span></code><a class="headerlink" href="#ontimeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p>A function to be executed when script execution time exceeds the value of the timeout option, if any has been set.</p>
<p>By default, on timeout the script will exit displaying an error, except in test environment where it will just add a failure to the suite results.</p>
</div>
<div class="section" id="onwaittimeout">
<span id="index-13"></span><h3><code class="docutils literal"><span class="pre">onWaitTimeout</span></code><a class="headerlink" href="#onwaittimeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">Function</span></code></p>
<p>A function to be executed when a <code class="docutils literal"><span class="pre">waitFor*</span></code> function execution time exceeds the value of the waitTimeout option, if any has been set.</p>
<p>By default, on timeout the script will exit displaying an error, except in test environment where it will just add a failure to the suite results.</p>
</div>
<div class="section" id="page">
<h3><code class="docutils literal"><span class="pre">page</span></code><a class="headerlink" href="#page" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">WebPage</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>An existing PhantomJS <code class="docutils literal"><span class="pre">WebPage</span></code> instance</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>Overriding</strong> the <code class="docutils literal"><span class="pre">page</span></code> properties can cause some of the casper features <strong>may not work</strong>. For example, overriding the <code class="docutils literal"><span class="pre">onUrlChanged</span></code> property will cause the <code class="docutils literal"><span class="pre">waitForUrl</span></code> feature not work.</p>
</div>
</div>
<div class="section" id="pagesettings">
<span id="index-14"></span><h3><code class="docutils literal"><span class="pre">pageSettings</span></code><a class="headerlink" href="#pagesettings" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Object</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">{}</span></code></p>
<p>PhantomJS&#8217;s WebPage settings object. Available settings are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">javascriptEnabled</span></code> defines whether to execute the script in the page or not (default to <code class="docutils literal"><span class="pre">true</span></code>)</li>
<li><code class="docutils literal"><span class="pre">loadImages</span></code> defines whether to load the inlined images or not</li>
<li><code class="docutils literal"><span class="pre">loadPlugins</span></code> defines whether to load NPAPI plugins (Flash, Silverlight, …) or not</li>
<li><code class="docutils literal"><span class="pre">localToRemoteUrlAccessEnabled</span></code> defines whether local resource (e.g. from file) can access remote URLs or not (default to <code class="docutils literal"><span class="pre">false</span></code>)</li>
<li><code class="docutils literal"><span class="pre">userAgent</span></code> defines the user agent sent to server when the web page requests resources</li>
<li><code class="docutils literal"><span class="pre">userName</span></code> sets the user name used for HTTP authentication</li>
<li><code class="docutils literal"><span class="pre">password</span></code> sets the password used for HTTP authentication</li>
<li><code class="docutils literal"><span class="pre">XSSAuditingEnabled</span></code> defines whether load requests should be monitored for cross-site scripting attempts (default to <code class="docutils literal"><span class="pre">false</span></code>)</li>
</ul>
</div>
<div class="section" id="remotescripts">
<span id="index-15"></span><h3><code class="docutils literal"><span class="pre">remoteScripts</span></code><a class="headerlink" href="#remotescripts" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Array</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">[]</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>A collection of remote script urls to include in every page loaded</p>
</div>
<div class="section" id="safelogs">
<span id="index-16"></span><h3><code class="docutils literal"><span class="pre">safeLogs</span></code><a class="headerlink" href="#safelogs" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Boolean</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>When this option is set to true&nbsp;— which is the default, any password information entered in &lt;input type=&#8221;password&#8221;&gt; will be obfuscated in log messages. Set safeLogs to false to disclose passwords in plain text (not recommended).</p>
</div>
<div class="section" id="silenterrors">
<span id="index-17"></span><h3><code class="docutils literal"><span class="pre">silentErrors</span></code><a class="headerlink" href="#silenterrors" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Boolean</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></p>
<p>When this option is enabled, caught step errors are not thrown (though related events are still emitted). Mostly used internally in a testing context.</p>
</div>
<div class="section" id="steptimeout">
<span id="index-18"></span><h3><code class="docutils literal"><span class="pre">stepTimeout</span></code><a class="headerlink" href="#steptimeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Number</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>Max step timeout in milliseconds; when set, every defined step function will have to execute before this timeout value has been reached. You can define the onStepTimeout() callback to catch such a case. By default, the script will die() with an error message.</p>
</div>
<div class="section" id="timeout">
<span id="index-19"></span><h3><code class="docutils literal"><span class="pre">timeout</span></code><a class="headerlink" href="#timeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Number</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>Max timeout in milliseconds</p>
</div>
<div class="section" id="verbose">
<span id="index-20"></span><h3><code class="docutils literal"><span class="pre">verbose</span></code><a class="headerlink" href="#verbose" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Boolean</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></p>
<p>Realtime output of log messages</p>
</div>
<div class="section" id="viewportsize">
<span id="index-21"></span><h3><code class="docutils literal"><span class="pre">viewportSize</span></code><a class="headerlink" href="#viewportsize" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Object</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">null</span></code></p>
<p>Viewport size, eg. <code class="docutils literal"><span class="pre">{width:</span> <span class="pre">800,</span> <span class="pre">height:</span> <span class="pre">600}</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PhantomJS ships with a default viewport of 400x300, and CasperJS won&#8217;t override it by default.</p>
</div>
</div>
<div class="section" id="retrytimeout">
<span id="index-22"></span><h3><code class="docutils literal"><span class="pre">retryTimeout</span></code><a class="headerlink" href="#retrytimeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Number</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">100</span></code></p>
<p>Default delay between attempts, for <code class="docutils literal"><span class="pre">wait*</span></code> family functions.</p>
</div>
<div class="section" id="waittimeout">
<h3><code class="docutils literal"><span class="pre">waitTimeout</span></code><a class="headerlink" href="#waittimeout" title="Permalink to this headline">¶</a></h3>
<p><strong>Type:</strong> <code class="docutils literal"><span class="pre">Number</span></code></p>
<p><strong>Default:</strong> <code class="docutils literal"><span class="pre">5000</span></code></p>
<p>Default wait timeout, for <code class="docutils literal"><span class="pre">wait*</span></code> family functions.</p>
</div>
</div>
<div class="section" id="casper-prototype">
<h2><code class="docutils literal"><span class="pre">Casper</span></code> prototype<a class="headerlink" href="#casper-prototype" title="Permalink to this headline">¶</a></h2>
<div class="section" id="back">
<h3><code class="docutils literal"><span class="pre">back()</span></code><a class="headerlink" href="#back" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">back()</span></code></p>
<p>Moves back a step in browser&#8217;s history:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/1&#39;</span><span class="p">)</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/2&#39;</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/3&#39;</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getCurrentUrl</span><span class="p">());</span> <span class="c1">// &#39;http://foo.bar/2&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Also have a look at <a class="reference internal" href="#forward">forward()</a>.</p>
<span class="target" id="casper-base64encode"></span></div>
<div class="section" id="base64encode">
<span id="index-23"></span><h3><code class="docutils literal"><span class="pre">base64encode()</span></code><a class="headerlink" href="#base64encode" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">base64encode(String</span> <span class="pre">url</span> <span class="pre">[,</span> <span class="pre">String</span> <span class="pre">method,</span> <span class="pre">Object</span> <span class="pre">data])</span></code></p>
<p>Encodes a resource using the base64 algorithm synchronously using
client-side XMLHttpRequest.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We cannot use <code class="docutils literal"><span class="pre">window.btoa()</span></code> because it fails miserably in the version of WebKit shipping with PhantomJS.</p>
</div>
<p>Example: retrieving google logo image encoded in base64:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">base64logo</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">base64logo</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">base64encode</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/images/srpr/logo3w.png&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="nx">base64logo</span><span class="p">).</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can also perform an HTTP POST request to retrieve the contents to
encode:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">base64contents</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://domain.tld/download.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">base64contents</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">base64encode</span><span class="p">(</span><span class="s1">&#39;http://domain.tld/&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">param1</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
        <span class="nx">param2</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="nx">base64contents</span><span class="p">).</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="bypass">
<span id="index-24"></span><h3><code class="docutils literal"><span class="pre">bypass()</span></code><a class="headerlink" href="#bypass" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">bypass(Numbr</span> <span class="pre">nb)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Bypasses a given number of defined navigation steps:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// This step will be executed</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bypass</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// This test won&#39;t be executed</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Nor this one</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<span class="target" id="casper-click"></span></div>
<div class="section" id="click">
<span id="index-25"></span><h3><code class="docutils literal"><span class="pre">click()</span></code><a class="headerlink" href="#click" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">click(String</span> <span class="pre">selector)</span></code></p>
<p>Performs a click on the element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code>. The method tries two strategies sequentially:</p>
<ol class="arabic simple">
<li>trying to trigger a MouseEvent in Javascript</li>
<li>using native QtWebKit event if the previous attempt failed</li>
</ol>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">thenEvaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;q&quot;]&#39;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">term</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;form[name=&quot;f&quot;]&#39;</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span>
<span class="p">},</span> <span class="s1">&#39;CasperJS&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Click on 1st result link</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;h3.r a&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;clicked ok, new location is &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCurrentUrl</span><span class="p">());</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="clicklabel">
<span id="index-26"></span><h3><code class="docutils literal"><span class="pre">clickLabel()</span></code><a class="headerlink" href="#clicklabel" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">clickLabel(String</span> <span class="pre">label[,</span> <span class="pre">String</span> <span class="pre">tag])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.1.</span></p>
</div>
<p>Clicks on the first DOM element found containing <code class="docutils literal"><span class="pre">label</span></code> text. Optionaly ensures that the element node name is <code class="docutils literal"><span class="pre">tag</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// &lt;a href=&quot;...&quot;&gt;My link is beautiful&lt;/a&gt;</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">clickLabel</span><span class="p">(</span><span class="s1">&#39;My link is beautiful&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// &lt;button type=&quot;submit&quot;&gt;But my button is sexier&lt;/button&gt;</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">clickLabel</span><span class="p">(</span><span class="s1">&#39;But my button is sexier&#39;</span><span class="p">,</span> <span class="s1">&#39;button&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="capture">
<span id="index-27"></span><h3><code class="docutils literal"><span class="pre">capture()</span></code><a class="headerlink" href="#capture" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">capture(String</span> <span class="pre">targetFilepath,</span> <span class="pre">[Object</span> <span class="pre">clipRect,</span> <span class="pre">Object</span> <span class="pre">imgOptions])</span></code></p>
<p>Proxy method for PhantomJS&#8217; <code class="docutils literal"><span class="pre">WebPage#render</span></code>. Adds a <code class="docutils literal"><span class="pre">clipRect</span></code> parameter for automatically setting page <code class="docutils literal"><span class="pre">clipRect</span></code> setting and reverts it back once done:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s1">&#39;google.png&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">top</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">400</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>The <code class="docutils literal"><span class="pre">imgOptions</span></code> object allows to specify two options:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">format</span></code> to set the image format manually, avoiding relying on the filename</li>
<li><code class="docutils literal"><span class="pre">quality</span></code> to set the image quality, from 1 to 100</li>
</ul>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;jpg&#39;</span><span class="p">,</span>
        <span class="nx">quality</span><span class="o">:</span> <span class="mi">75</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="capturebase64">
<span id="index-28"></span><h3><code class="docutils literal"><span class="pre">captureBase64()</span></code><a class="headerlink" href="#capturebase64" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">captureBase64(String</span> <span class="pre">format[,</span> <span class="pre">Mixed</span> <span class="pre">area])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.5.</span></p>
</div>
<p>Computes the <a class="reference external" href="http://en.wikipedia.org/wiki/Base64">Base64</a> representation of a binary image capture of the current page, or an area within the page, in a given format.</p>
<p>Supported image formats are <code class="docutils literal"><span class="pre">bmp</span></code>, <code class="docutils literal"><span class="pre">jpg</span></code>, <code class="docutils literal"><span class="pre">jpeg</span></code>, <code class="docutils literal"><span class="pre">png</span></code>, <code class="docutils literal"><span class="pre">ppm</span></code>, <code class="docutils literal"><span class="pre">tiff</span></code>, <code class="docutils literal"><span class="pre">xbm</span></code> and <code class="docutils literal"><span class="pre">xpm</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">area</span></code> argument can be either of the following types:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">String</span></code>: area is a CSS3 selector string, eg. <code class="docutils literal"><span class="pre">div#plop</span> <span class="pre">form[name=&quot;form&quot;]</span> <span class="pre">input[type=&quot;submit&quot;]</span></code></li>
<li><code class="docutils literal"><span class="pre">clipRect</span></code>: area is a clipRect object, eg. <code class="docutils literal"><span class="pre">{&quot;top&quot;:0,&quot;left&quot;:0,&quot;width&quot;:320,&quot;height&quot;:200}</span></code></li>
<li><code class="docutils literal"><span class="pre">Object</span></code>: area is a <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">object</span></code>, eg. an XPath selector</li>
</ul>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.com&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// selector capture</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">captureBase64</span><span class="p">(</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="s1">&#39;#lga&#39;</span><span class="p">));</span>
    <span class="c1">// clipRect capture</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">captureBase64</span><span class="p">(</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">320</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">200</span>
    <span class="p">}));</span>
    <span class="c1">// whole page capture</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">captureBase64</span><span class="p">(</span><span class="s1">&#39;png&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<span class="target" id="casper-captureselector"></span></div>
<div class="section" id="captureselector">
<span id="index-29"></span><h3><code class="docutils literal"><span class="pre">captureSelector()</span></code><a class="headerlink" href="#captureselector" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">captureSelector(String</span> <span class="pre">targetFile,</span> <span class="pre">String</span> <span class="pre">selector</span> <span class="pre">[,</span> <span class="pre">Object</span> <span class="pre">imgOptions])</span></code></p>
<p>Captures the page area containing the provided selector and saves it to <code class="docutils literal"><span class="pre">targetFile</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.weather.com/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">captureSelector</span><span class="p">(</span><span class="s1">&#39;weather.png&#39;</span><span class="p">,</span> <span class="s1">&#39;#wx-main&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>The <code class="docutils literal"><span class="pre">imgOptions</span></code> object allows to specify two options:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">format</span></code> to set the image format manually, avoiding relying on the target filename</li>
<li><code class="docutils literal"><span class="pre">quality</span></code> to set the image quality, from 1 to 100</li>
</ul>
</div>
<div class="section" id="clear">
<h3><code class="docutils literal"><span class="pre">clear()</span></code><a class="headerlink" href="#clear" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">clear()</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.5.</span></p>
</div>
<p>Clears the current page execution environment context. Useful to avoid having previously loaded DOM contents being still active.</p>
<p>Think of it as a way to stop javascript execution within the remote DOM environment:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span> <span class="c1">// javascript execution in this page has been stopped</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="debughtml">
<span id="index-30"></span><h3><code class="docutils literal"><span class="pre">debugHTML()</span></code><a class="headerlink" href="#debughtml" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">debugHTML([String</span> <span class="pre">selector,</span> <span class="pre">Boolean</span> <span class="pre">outer])</span></code></p>
<p>Outputs the results of <a class="reference internal" href="#gethtml">getHTML()</a> directly to the console. It takes the same arguments as <code class="docutils literal"><span class="pre">getHTML()</span></code>.</p>
</div>
<div class="section" id="debugpage">
<span id="index-31"></span><h3><code class="docutils literal"><span class="pre">debugPage()</span></code><a class="headerlink" href="#debugpage" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">debugPage()</span></code></p>
<p>Logs the textual contents of the current page directly to the standard output, for debugging purpose:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">debugPage</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="die">
<h3><code class="docutils literal"><span class="pre">die()</span></code><a class="headerlink" href="#die" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">die(String</span> <span class="pre">message[,</span> <span class="pre">int</span> <span class="pre">status])</span></code></p>
<p>Exits phantom with a logged error message and an optional exit status code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">die</span><span class="p">(</span><span class="s2">&quot;Fail.&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<span class="target" id="casper-download"></span></div>
<div class="section" id="download">
<span id="index-32"></span><h3><code class="docutils literal"><span class="pre">download()</span></code><a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">download(String</span> <span class="pre">url,</span> <span class="pre">String</span> <span class="pre">target[,</span> <span class="pre">String</span> <span class="pre">method,</span> <span class="pre">Object</span> <span class="pre">data])</span></code></p>
<p>Saves a remote resource onto the filesystem. You can optionally set the HTTP method using the <code class="docutils literal"><span class="pre">method</span></code> argument, and pass request arguments through the <code class="docutils literal"><span class="pre">data</span></code> object (see <a class="reference internal" href="#base64encode">base64encode()</a>):</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.google.fr/intl/fr/about/corporate/company/&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="s1">&#39;google_company.html&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Done.&#39;</span><span class="p">).</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have some troubles downloading files, try to <span class="xref std std-ref">disable web security</span>.</p>
</div>
</div>
<div class="section" id="each">
<h3><code class="docutils literal"><span class="pre">each()</span></code><a class="headerlink" href="#each" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">each(Array</span> <span class="pre">array,</span> <span class="pre">Function</span> <span class="pre">fn)</span></code></p>
<p>Iterates over provided array items and execute a callback:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">links</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;http://google.com/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;http://yahoo.com/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;http://bing.com/&#39;</span>
<span class="p">];</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="nx">links</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">link</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="nx">link</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">());</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Have a look at the <a class="reference external" href="https://github.com/n1k0/casperjs/blob/master/samples/googlematch.js">googlematch.js</a> sample script for a concrete use case.</p>
</div>
</div>
<div class="section" id="eachthen">
<h3><code class="docutils literal"><span class="pre">eachThen()</span></code><a class="headerlink" href="#eachthen" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">eachThen(Array</span> <span class="pre">array,</span> <span class="pre">Function</span> <span class="pre">then)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Iterates over provided array items and adds a step to the stack with current data attached to it:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">eachThen</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Here&#8217;s an example for opening an array of urls:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;http://google.com/&#39;</span><span class="p">,</span> <span class="s1">&#39;http://yahoo.com/&#39;</span><span class="p">];</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">eachThen</span><span class="p">(</span><span class="nx">urls</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Opened&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Current item will be stored in the <code class="docutils literal"><span class="pre">response.data</span></code> property.</p>
</div>
<span class="target" id="casper-echo"></span></div>
<div class="section" id="echo">
<span id="index-33"></span><h3><code class="docutils literal"><span class="pre">echo()</span></code><a class="headerlink" href="#echo" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">echo(String</span> <span class="pre">message[,</span> <span class="pre">String</span> <span class="pre">style])</span></code></p>
<p>Prints something to stdout, optionally with some fancy color (see the <a class="reference internal" href="colorizer.html#colorizer-module"><span>colorizer module</span></a> for more information):</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Page title is: &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
    <span class="p">}),</span> <span class="s1">&#39;INFO&#39;</span><span class="p">);</span> <span class="c1">// Will be printed in green on the console</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="evaluate">
<span id="casper-evaluate"></span><span id="index-34"></span><h3><code class="docutils literal"><span class="pre">evaluate()</span></code><a class="headerlink" href="#evaluate" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">evaluate(Function</span> <span class="pre">fn[,</span> <span class="pre">arg1[,</span> <span class="pre">arg2[,</span> <span class="pre">…]]])</span></code></p>
<p>Basically <a class="reference external" href="http://phantomjs.org/api/webpage/method/evaluate.html">PhantomJS&#8217; WebPage#evaluate</a> equivalent. Evaluates an expression <strong>in the current page DOM context</strong>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#username&#39;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#password&#39;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">password</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#submit&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>
<span class="p">},</span> <span class="s1">&#39;sheldon.cooper&#39;</span><span class="p">,</span> <span class="s1">&#39;b4z1ng4&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For filling and submitting forms, rather use the <a class="reference internal" href="#fill">fill()</a> method.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The pre-1.0 way of passing arguments using an object has been kept for BC purpose, though it may <a class="reference external" href="https://github.com/n1k0/casperjs/issues/349">not work in some case</a>; so you&#8217;re encouraged to use the method described above.</p>
</div>
<div class="topic">
<p class="topic-title first">Understanding <code class="docutils literal"><span class="pre">evaluate()</span></code></p>
<p>The concept behind this method is probably the most difficult to understand when discovering CasperJS. As a reminder, think of the <code class="docutils literal"><span class="pre">evaluate()</span></code> method as a <em>gate</em> between the CasperJS environment and the one of the page you have opened; everytime you pass a closure to <code class="docutils literal"><span class="pre">evaluate()</span></code>, you&#8217;re entering the page and execute code as if you were using the browser console.</p>
<p>Here&#8217;s a quickly drafted diagram trying to basically explain the separation of concerns:</p>
<div class="figure align-center">
<img alt="../_images/evaluate-diagram.png" src="../_images/evaluate-diagram.png" />
</div>
</div>
</div>
<div class="section" id="evaluateordie">
<h3><code class="docutils literal"><span class="pre">evaluateOrDie()</span></code><a class="headerlink" href="#evaluateordie" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">evaluateOrDie(Function</span> <span class="pre">fn[,</span> <span class="pre">String</span> <span class="pre">message])</span></code></p>
<p>Evaluates an expression within the current page DOM and <code class="docutils literal"><span class="pre">die()</span></code> if it returns anything but <code class="docutils literal"><span class="pre">true</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">evaluateOrDie</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="sr">/logged in/</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="p">},</span> <span class="s1">&#39;not authenticated&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="exit">
<span id="index-35"></span><h3><code class="docutils literal"><span class="pre">exit()</span></code><a class="headerlink" href="#exit" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">exit([int</span> <span class="pre">status])</span></code></p>
<p>Exits PhantomJS with an optional exit status code.</p>
</div>
<div class="section" id="exists">
<span id="index-36"></span><h3><code class="docutils literal"><span class="pre">exists()</span></code><a class="headerlink" href="#exists" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">exists(String</span> <span class="pre">selector)</span></code></p>
<p>Checks if any element within remote DOM matches the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="s1">&#39;#my_super_id&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;found #my_super_id&#39;</span><span class="p">,</span> <span class="s1">&#39;INFO&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;#my_super_id not found&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="fetchtext">
<span id="casper-fetchtext"></span><h3><code class="docutils literal"><span class="pre">fetchText()</span></code><a class="headerlink" href="#fetchtext" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">fetchText(String</span> <span class="pre">selector)</span></code></p>
<p>Retrieves text contents matching a given <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code>. If you provide one matching more than one element, their textual contents will be concatenated:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.com/search?q=foo&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fetchText</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">));</span>
<span class="p">}).</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="forward">
<h3><code class="docutils literal"><span class="pre">forward()</span></code><a class="headerlink" href="#forward" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">forward()</span></code></p>
<p>Moves a step forward in browser&#8217;s history:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/1&#39;</span><span class="p">)</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/2&#39;</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/3&#39;</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>    <span class="c1">// http://foo.bar/2</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>    <span class="c1">// http://foo.bar/1</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">forward</span><span class="p">();</span> <span class="c1">// http://foo.bar/2</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Also have a look at <a class="reference internal" href="#back">back()</a>.</p>
<span class="target" id="casper-log"></span></div>
<div class="section" id="log">
<span id="index-37"></span><h3><code class="docutils literal"><span class="pre">log()</span></code><a class="headerlink" href="#log" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">log(String</span> <span class="pre">message[,</span> <span class="pre">String</span> <span class="pre">level,</span> <span class="pre">String</span> <span class="pre">space])</span></code></p>
<p>Logs a message with an optional level in an optional space. Available levels are <code class="docutils literal"><span class="pre">debug</span></code>, <code class="docutils literal"><span class="pre">info</span></code>, <code class="docutils literal"><span class="pre">warning</span></code> and <code class="docutils literal"><span class="pre">error</span></code>. A space is a kind of namespace you can set for filtering your logs. By default, Casper logs messages in two distinct spaces: <code class="docutils literal"><span class="pre">phantom</span></code> and <code class="docutils literal"><span class="pre">remote</span></code>, to distinguish what happens in the PhantomJS environment from the remote one:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I&#39;m logging an error&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<span class="target" id="casper-fill"></span></div>
<div class="section" id="fill">
<span id="index-38"></span><h3><code class="docutils literal"><span class="pre">fill()</span></code><a class="headerlink" href="#fill" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">fill(String</span> <span class="pre">selector,</span> <span class="pre">Object</span> <span class="pre">values[,</span> <span class="pre">Boolean</span> <span class="pre">submit])</span></code></p>
<p>Fills the fields of a form with given values and optionally submits it. Fields
are referenced by their <code class="docutils literal"><span class="pre">name</span></code> attribute.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.1: </span>To use <code class="xref doc docutils literal"><span class="pre">CSS3</span> <span class="pre">or</span> <span class="pre">XPath</span> <span class="pre">selectors</span></code> instead, check the <a class="reference internal" href="#fillselectors">fillSelectors()</a> and <a class="reference internal" href="#fillxpath">fillXPath()</a> methods.</p>
</div>
<p>Example with this sample html form:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/contact&quot;</span> <span class="na">id=</span><span class="s">&quot;contact-form&quot;</span> <span class="na">enctype=</span><span class="s">&quot;multipart/form-data&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;subject&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;textearea</span> <span class="na">name=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;&lt;/textearea&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">name=</span><span class="s">&quot;civility&quot;</span> <span class="na">value=</span><span class="s">&quot;Mr&quot;</span><span class="nt">/&gt;</span> Mr
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">name=</span><span class="s">&quot;civility&quot;</span> <span class="na">value=</span><span class="s">&quot;Mrs&quot;</span><span class="nt">/&gt;</span> Mrs
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;email&quot;</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;file&quot;</span> <span class="na">name=</span><span class="s">&quot;attachment&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name=</span><span class="s">&quot;cc&quot;</span><span class="nt">/&gt;</span> Receive a copy
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>A script to fill and submit this form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://some.tld/contact.form&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;form#contact-form&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;subject&#39;</span><span class="o">:</span>    <span class="s1">&#39;I am watching you&#39;</span><span class="p">,</span>
        <span class="s1">&#39;content&#39;</span><span class="o">:</span>    <span class="s1">&#39;So be careful.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;civility&#39;</span><span class="o">:</span>   <span class="s1">&#39;Mr&#39;</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="o">:</span>       <span class="s1">&#39;Chuck Norris&#39;</span><span class="p">,</span>
        <span class="s1">&#39;email&#39;</span><span class="o">:</span>      <span class="s1">&#39;chuck@norris.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cc&#39;</span><span class="o">:</span>         <span class="kc">true</span><span class="p">,</span>
        <span class="s1">&#39;attachment&#39;</span><span class="o">:</span> <span class="s1">&#39;/Users/chuck/roundhousekick.doc&#39;</span>
    <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">evaluateOrDie</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="sr">/message sent/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerText</span><span class="p">);</span>
    <span class="p">},</span> <span class="s1">&#39;sending message failed&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;message sent&#39;</span><span class="p">).</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">fill()</span></code> method supports single selects in the same way as text input.
For multiple selects, supply an array of values to match against:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;/contact&quot;</span> <span class="na">id=</span><span class="s">&quot;contact-form&quot;</span> <span class="na">enctype=</span><span class="s">&quot;multipart/form-data&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">multiple</span> <span class="na">name=</span><span class="s">&quot;category&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">​&quot;0&quot;</span><span class="nt">&gt;</span>Friends​<span class="nt">&lt;/option&gt;</span>​
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">​&quot;1&quot;</span><span class="nt">&gt;</span>​Family​<span class="nt">&lt;/option&gt;</span>​
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">​&quot;2&quot;</span><span class="nt">&gt;</span>​Acquitances​<span class="nt">&lt;/option&gt;</span>​
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">​&quot;3&quot;</span><span class="nt">&gt;</span>​Colleagues<span class="nt">&lt;/option&gt;</span>​
    <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>A script to select multiple options for category in this form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;form#contact-form&#39;</span><span class="p">,</span> <span class="p">{</span>
       <span class="s1">&#39;categories&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span> <span class="c1">// Friends and Family</span>
   <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ol class="last arabic simple">
<li>The <code class="docutils literal"><span class="pre">fill()</span></code> method currently can&#8217;t fill <strong>file fields using XPath selectors</strong>; PhantomJS natively only allows the use of CSS3 selectors in its <code class="docutils literal"><span class="pre">uploadFile()</span></code> method, hence this limitation.</li>
<li>Please Don&#8217;t use CasperJS nor PhantomJS to send spam, or I&#8217;ll be calling the Chuck. More seriously, please just don&#8217;t.</li>
</ol>
</div>
</div>
<div class="section" id="fillselectors">
<h3><code class="docutils literal"><span class="pre">fillSelectors()</span></code><a class="headerlink" href="#fillselectors" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">fillSelectors(String</span> <span class="pre">selector,</span> <span class="pre">Object</span> <span class="pre">values[,</span> <span class="pre">Boolean</span> <span class="pre">submit])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Fills form fields with given values and optionally submits it. Fields
are referenced by <code class="docutils literal"><span class="pre">CSS3</span></code> selectors:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://some.tld/contact.form&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillSelectors</span><span class="p">(</span><span class="s1">&#39;form#contact-form&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;input[name=&quot;subject&quot;]&#39;</span><span class="o">:</span>    <span class="s1">&#39;I am watching you&#39;</span><span class="p">,</span>
        <span class="s1">&#39;input[name=&quot;content&quot;]&#39;</span><span class="o">:</span>    <span class="s1">&#39;So be careful.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;input[name=&quot;civility&quot;]&#39;</span><span class="o">:</span>   <span class="s1">&#39;Mr&#39;</span><span class="p">,</span>
        <span class="s1">&#39;input[name=&quot;name&quot;]&#39;</span><span class="o">:</span>       <span class="s1">&#39;Chuck Norris&#39;</span><span class="p">,</span>
        <span class="s1">&#39;input[name=&quot;email&quot;]&#39;</span><span class="o">:</span>      <span class="s1">&#39;chuck@norris.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;input[name=&quot;cc&quot;]&#39;</span><span class="o">:</span>         <span class="kc">true</span><span class="p">,</span>
        <span class="s1">&#39;input[name=&quot;attachment&quot;]&#39;</span><span class="o">:</span> <span class="s1">&#39;/Users/chuck/roundhousekick.doc&#39;</span>
    <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="filllabels">
<h3><code class="docutils literal"><span class="pre">fillLabels()</span></code><a class="headerlink" href="#filllabels" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">fillLabels(String</span> <span class="pre">selector,</span> <span class="pre">Object</span> <span class="pre">values[,</span> <span class="pre">Boolean</span> <span class="pre">submit])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Fills a form with provided field values using associated label text Fields
are referenced by label content values:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://some.tld/contact.form&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillLabels</span><span class="p">(</span><span class="s1">&#39;form#contact-form&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">Email</span><span class="o">:</span>         <span class="s1">&#39;chuck@norris.com&#39;</span><span class="p">,</span>
        <span class="nx">Password</span><span class="o">:</span>      <span class="s1">&#39;chuck&#39;</span><span class="p">,</span>
        <span class="nx">Content</span><span class="o">:</span>       <span class="s1">&#39;Am watching thou&#39;</span><span class="p">,</span>
        <span class="nx">Check</span><span class="o">:</span>         <span class="kc">true</span><span class="p">,</span>
        <span class="nx">No</span><span class="o">:</span>            <span class="kc">true</span><span class="p">,</span>
        <span class="nx">Topic</span><span class="o">:</span>         <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
        <span class="nx">Multitopic</span><span class="o">:</span>    <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;car&#39;</span><span class="p">],</span>
        <span class="nx">File</span><span class="o">:</span>          <span class="nx">fpath</span><span class="p">,</span>
        <span class="s2">&quot;1&quot;</span><span class="o">:</span>           <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;3&quot;</span><span class="o">:</span>           <span class="kc">true</span><span class="p">,</span>
        <span class="nx">Strange</span><span class="o">:</span>       <span class="s2">&quot;very&quot;</span>
    <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="fillxpath">
<h3><code class="docutils literal"><span class="pre">fillXPath()</span></code><a class="headerlink" href="#fillxpath" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">fillXPath(String</span> <span class="pre">selector,</span> <span class="pre">Object</span> <span class="pre">values[,</span> <span class="pre">Boolean</span> <span class="pre">submit])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Fills form fields with given values and optionally submits it. While the <code class="docutils literal"><span class="pre">form</span></code> element is always referenced by a CSS3 selector, fields are referenced by <code class="docutils literal"><span class="pre">XPath</span></code> selectors:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://some.tld/contact.form&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fillXPath</span><span class="p">(</span><span class="s1">&#39;form#contact-form&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;//input[@name=&quot;subject&quot;]&#39;</span><span class="o">:</span>    <span class="s1">&#39;I am watching you&#39;</span><span class="p">,</span>
        <span class="s1">&#39;//input[@name=&quot;content&quot;]&#39;</span><span class="o">:</span>    <span class="s1">&#39;So be careful.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;//input[@name=&quot;civility&quot;]&#39;</span><span class="o">:</span>   <span class="s1">&#39;Mr&#39;</span><span class="p">,</span>
        <span class="s1">&#39;//input[@name=&quot;name&quot;]&#39;</span><span class="o">:</span>       <span class="s1">&#39;Chuck Norris&#39;</span><span class="p">,</span>
        <span class="s1">&#39;//input[@name=&quot;email&quot;]&#39;</span><span class="o">:</span>      <span class="s1">&#39;chuck@norris.com&#39;</span><span class="p">,</span>
        <span class="s1">&#39;//input[@name=&quot;cc&quot;]&#39;</span><span class="o">:</span>         <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal"><span class="pre">fillXPath()</span></code> method currently can&#8217;t fill <strong>file fields using XPath selectors</strong>; PhantomJS natively only allows the use of CSS3 selectors in its <code class="docutils literal"><span class="pre">uploadFile()</span></code> method, hence this limitation.</p>
</div>
</div>
<div class="section" id="getcurrenturl">
<span id="index-39"></span><h3><code class="docutils literal"><span class="pre">getCurrentUrl()</span></code><a class="headerlink" href="#getcurrenturl" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getCurrentUrl()</span></code></p>
<p>Retrieves current page URL. Note that the url will be url-decoded:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getCurrentUrl</span><span class="p">());</span> <span class="c1">// &quot;http://www.google.fr/&quot;</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="getelementattribute">
<span id="index-40"></span><h3><code class="docutils literal"><span class="pre">getElementAttribute()</span></code><a class="headerlink" href="#getelementattribute" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getElementAttribute(String</span> <span class="pre">selector,</span> <span class="pre">String</span> <span class="pre">attribute)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Retrieves the value of an attribute on the first element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElementAttribute</span><span class="p">(</span><span class="s1">&#39;div[title=&quot;Google&quot;]&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">));</span> <span class="c1">// &quot;Google&quot;</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="getelementsattribute">
<span id="index-41"></span><h3><code class="docutils literal"><span class="pre">getElementsAttribute()</span></code><a class="headerlink" href="#getelementsattribute" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getElementsAttribute(String</span> <span class="pre">selector,</span> <span class="pre">String</span> <span class="pre">attribute)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Retrieves the values of an attribute on each element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElementsAttribute</span><span class="p">(</span><span class="s1">&#39;div[title=&quot;Google&quot;]&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">));</span> <span class="c1">// &quot;[&#39;Google&#39;]&quot;</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="getelementbounds">
<span id="index-42"></span><h3><code class="docutils literal"><span class="pre">getElementBounds()</span></code><a class="headerlink" href="#getelementbounds" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getElementBounds(String</span> <span class="pre">selector)</span></code></p>
<p>Retrieves boundaries for a DOM element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>.</p>
<p>It returns an Object with four keys: <code class="docutils literal"><span class="pre">top</span></code>, <code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">width</span></code> and <code class="docutils literal"><span class="pre">height</span></code>, or <code class="docutils literal"><span class="pre">null</span></code> if the selector doesn&#8217;t exist:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElementBounds</span><span class="p">(</span><span class="s1">&#39;div[title=&quot;Google&quot;]&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>This will output something like:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;height&quot;</span><span class="o">:</span> <span class="mi">95</span><span class="p">,</span>
    <span class="s2">&quot;left&quot;</span><span class="o">:</span> <span class="mi">352</span><span class="p">,</span>
    <span class="s2">&quot;top&quot;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="s2">&quot;width&quot;</span><span class="o">:</span> <span class="mi">275</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="getelementsbounds">
<span id="index-43"></span><h3><code class="docutils literal"><span class="pre">getElementsBounds()</span></code><a class="headerlink" href="#getelementsbounds" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getElementsBounds(String</span> <span class="pre">selector)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Retrieves a list of boundaries for all DOM elements matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>.</p>
<p>It returns an array of objects with four keys: <code class="docutils literal"><span class="pre">top</span></code>, <code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">width</span></code> and <code class="docutils literal"><span class="pre">height</span></code> (see <a class="reference internal" href="#getelementbounds">getElementBounds()</a>).</p>
<span class="target" id="casper-getelementinfo"></span></div>
<div class="section" id="getelementinfo">
<span id="index-44"></span><h3><code class="docutils literal"><span class="pre">getElementInfo()</span></code><a class="headerlink" href="#getelementinfo" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getElementInfo(String</span> <span class="pre">selector)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Retrieves information about the first element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElementInfo</span><span class="p">(</span><span class="s1">&#39;#hplogo&#39;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Gives something like:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;align&quot;</span><span class="o">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dir&quot;</span><span class="o">:</span> <span class="s2">&quot;ltr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;hplogo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;onload&quot;</span><span class="o">:</span> <span class="s2">&quot;window.lol&amp;&amp;lol()&quot;</span><span class="p">,</span>
        <span class="s2">&quot;style&quot;</span><span class="o">:</span> <span class="s2">&quot;height:110px;width:276px;background:url(/images/srpr/logo1w.png) no-repeat&quot;</span><span class="p">,</span>
        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Google&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;height&quot;</span><span class="o">:</span> <span class="mi">110</span><span class="p">,</span>
    <span class="s2">&quot;html&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;div nowrap=\&quot;nowrap\&quot; style=\&quot;color:#777;font-size:16px;font-weight:bold;position:relative;left:214px;top:70px\&quot;&gt;France&lt;/div&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nodeName&quot;</span><span class="o">:</span> <span class="s2">&quot;div&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tag&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;div dir=\&quot;ltr\&quot; title=\&quot;Google\&quot; align=\&quot;left\&quot; id=\&quot;hplogo\&quot; onload=\&quot;window.lol&amp;amp;&amp;amp;lol()\&quot; style=\&quot;height:110px;width:276px;background:url(/images/srpr/logo1w.png) no-repeat\&quot;&gt;&lt;div nowrap=\&quot;nowrap\&quot; style=\&quot;color:#777;font-size:16px;font-weight:bold;position:relative;left:214px;top:70px\&quot;&gt;France&lt;/div&gt;&lt;/div&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;France\n&quot;</span><span class="p">,</span>
    <span class="s2">&quot;visible&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;width&quot;</span><span class="o">:</span> <span class="mi">276</span><span class="p">,</span>
    <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">62</span><span class="p">,</span>
    <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">76</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method <strong>does not</strong> return a DOM element, only a simple object representation of it; this is because the casper environment has no direct access to the scraped page one.</p>
</div>
</div>
<div class="section" id="getelementsinfo">
<span id="index-45"></span><h3><code class="docutils literal"><span class="pre">getElementsInfo()</span></code><a class="headerlink" href="#getelementsinfo" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getElementsInfo(String</span> <span class="pre">selector)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Retrieves information about all elements matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElementsInfo</span><span class="p">(</span><span class="s1">&#39;#hplogo&#39;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Gives something like:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;align&quot;</span><span class="o">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dir&quot;</span><span class="o">:</span> <span class="s2">&quot;ltr&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;hplogo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;onload&quot;</span><span class="o">:</span> <span class="s2">&quot;window.lol&amp;&amp;lol()&quot;</span><span class="p">,</span>
            <span class="s2">&quot;style&quot;</span><span class="o">:</span> <span class="s2">&quot;height:110px;width:276px;background:url(/images/srpr/logo1w.png) no-repeat&quot;</span><span class="p">,</span>
            <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Google&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;height&quot;</span><span class="o">:</span> <span class="mi">110</span><span class="p">,</span>
        <span class="s2">&quot;html&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;div nowrap=\&quot;nowrap\&quot; style=\&quot;color:#777;font-size:16px;font-weight:bold;position:relative;left:214px;top:70px\&quot;&gt;France&lt;/div&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nodeName&quot;</span><span class="o">:</span> <span class="s2">&quot;div&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tag&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;div dir=\&quot;ltr\&quot; title=\&quot;Google\&quot; align=\&quot;left\&quot; id=\&quot;hplogo\&quot; onload=\&quot;window.lol&amp;amp;&amp;amp;lol()\&quot; style=\&quot;height:110px;width:276px;background:url(/images/srpr/logo1w.png) no-repeat\&quot;&gt;&lt;div nowrap=\&quot;nowrap\&quot; style=\&quot;color:#777;font-size:16px;font-weight:bold;position:relative;left:214px;top:70px\&quot;&gt;France&lt;/div&gt;&lt;/div&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;France\n&quot;</span><span class="p">,</span>
        <span class="s2">&quot;visible&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;width&quot;</span><span class="o">:</span> <span class="mi">276</span><span class="p">,</span>
        <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">62</span><span class="p">,</span>
        <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">76</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method <strong>does not</strong> return a <code class="docutils literal"><span class="pre">NodeList</span></code>, only a simple array of object representations of matching elements; this is because the casper environment has no direct access to the scraped page one.</p>
</div>
</div>
<div class="section" id="getformvalues">
<span id="index-46"></span><h3><code class="docutils literal"><span class="pre">getFormValues()</span></code><a class="headerlink" href="#getformvalues" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getFormValues(String</span> <span class="pre">selector)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Retrieves a given form all of its field values:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">q</span><span class="o">:</span> <span class="s1">&#39;plop&#39;</span><span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getFormValues</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">).</span><span class="nx">q</span><span class="p">);</span> <span class="c1">// &#39;plop&#39;</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="getglobal">
<span id="index-47"></span><h3><code class="docutils literal"><span class="pre">getGlobal()</span></code><a class="headerlink" href="#getglobal" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getGlobal(String</span> <span class="pre">name)</span></code></p>
<p>Retrieves a global variable value within the remote DOM environment by its name. Basically, <code class="docutils literal"><span class="pre">getGlobal('foo')</span></code> will retrieve the value of <code class="docutils literal"><span class="pre">window.foo</span></code> from the page:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getGlobal</span><span class="p">(</span><span class="s1">&#39;innerWidth&#39;</span><span class="p">));</span> <span class="c1">// 1024</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="gethtml">
<span id="index-48"></span><h3><code class="docutils literal"><span class="pre">getHTML()</span></code><a class="headerlink" href="#gethtml" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getHTML([String</span> <span class="pre">selector,</span> <span class="pre">Boolean</span> <span class="pre">outer])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Retrieves HTML code from the current page. By default, it outputs the whole page HTML contents:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getHTML</span><span class="p">());</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">getHTML()</span></code> method can also dump HTML contents matching a given <code class="xref doc docutils literal"><span class="pre">selector</span></code>; for example with this HTML code:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&quot;foobar&quot;</span><span class="nt">&gt;</span>Plop<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>You can fetch those contents using:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.site.tld/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getHTML</span><span class="p">(</span><span class="s1">&#39;h1#foobar&#39;</span><span class="p">));</span> <span class="c1">// =&gt; &#39;Plop&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">outer</span></code> argument allows to retrieve the outer HTML contents of the matching element:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.site.tld/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getHTML</span><span class="p">(</span><span class="s1">&#39;h1#foobar&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span> <span class="c1">// =&gt; &#39;&lt;h1 id=&quot;foobar&quot;&gt;Plop&lt;/h1&gt;&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="getpagecontent">
<h3><code class="docutils literal"><span class="pre">getPageContent()</span></code><a class="headerlink" href="#getpagecontent" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getPageContent()</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Retrieves current page contents, dealing with exotic other content types than HTML:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;http://search.twitter.com/search.json?q=casperjs&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
            <span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getPageContent</span><span class="p">()));</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="gettitle">
<span id="index-49"></span><h3><code class="docutils literal"><span class="pre">getTitle()</span></code><a class="headerlink" href="#gettitle" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">getTitle()</span></code></p>
<p>Retrieves current page title:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">());</span> <span class="c1">// &quot;Google&quot;</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<span class="target" id="casper-mouseevent"></span></div>
<div class="section" id="mouseevent">
<span id="index-50"></span><h3><code class="docutils literal"><span class="pre">mouseEvent()</span></code><a class="headerlink" href="#mouseevent" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">mouseEvent(String</span> <span class="pre">type,</span> <span class="pre">String</span> <span class="pre">selector)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.9.</span></p>
</div>
<p>Triggers a mouse event on the first element found matching the provided selector.</p>
<p>Supported events are <code class="docutils literal"><span class="pre">mouseup</span></code>, <code class="docutils literal"><span class="pre">mousedown</span></code>, <code class="docutils literal"><span class="pre">click</span></code>, <code class="docutils literal"><span class="pre">mousemove</span></code>, <code class="docutils literal"><span class="pre">mouseover</span></code> and <code class="docutils literal"><span class="pre">mouseout</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mouseEvent</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="s1">&#39;h2 a&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="open">
<span id="index-51"></span><h3><code class="docutils literal"><span class="pre">open()</span></code><a class="headerlink" href="#open" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">open(String</span> <span class="pre">location,</span> <span class="pre">Object</span> <span class="pre">Settings)</span></code></p>
<p>Performs an HTTP request for opening a given location. You can forge <code class="docutils literal"><span class="pre">GET</span></code>, <code class="docutils literal"><span class="pre">POST</span></code>, <code class="docutils literal"><span class="pre">PUT</span></code>, <code class="docutils literal"><span class="pre">DELETE</span></code> and <code class="docutils literal"><span class="pre">HEAD</span></code> requests.</p>
<p>Example for a standard <code class="docutils literal"><span class="pre">GET</span></code> request:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;http://www.google.com/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;GOT it.&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Example for a <code class="docutils literal"><span class="pre">POST</span></code> request:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;http://some.testserver.com/post.php&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span>   <span class="p">{</span>
        <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;Plop&#39;</span><span class="p">,</span>
        <span class="s1">&#39;body&#39;</span><span class="o">:</span>  <span class="s1">&#39;Wow.&#39;</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;POSTED it.&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>To pass nested parameters arrays:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;http://some.testserver.com/post.php&#39;</span><span class="p">,</span> <span class="p">{</span>
       <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
       <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
            <span class="s1">&#39;standard_param&#39;</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nested_param[]&#39;</span><span class="o">:</span> <span class="p">[</span>       <span class="c1">// please note the use of square brackets!</span>
                <span class="s1">&#39;Something&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Something else&#39;</span>
            <span class="p">]</span>
       <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>You can also set custom request headers to send when performing an outgoing request, passing the <code class="docutils literal"><span class="pre">headers</span></code> option:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;http://some.testserver.com/post.php&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span>   <span class="p">{</span>
        <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;Plop&#39;</span><span class="p">,</span>
        <span class="s1">&#39;body&#39;</span><span class="o">:</span>  <span class="s1">&#39;Wow.&#39;</span>
    <span class="p">},</span>
    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="o">:</span> <span class="s1">&#39;fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3&#39;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="reload">
<h3><code class="docutils literal"><span class="pre">reload()</span></code><a class="headerlink" href="#reload" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">reload([Function</span> <span class="pre">then])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Reloads current page location:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.com&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;loaded&quot;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;loaded again&quot;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="repeat">
<h3><code class="docutils literal"><span class="pre">repeat()</span></code><a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">repeat(int</span> <span class="pre">times,</span> <span class="pre">Function</span> <span class="pre">then)</span></code></p>
<p>Repeats a navigation step a given number of times:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">repeat</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;Badger&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<span class="target" id="casper-resourceexists"></span></div>
<div class="section" id="resourceexists">
<span id="index-52"></span><h3><code class="docutils literal"><span class="pre">resourceExists()</span></code><a class="headerlink" href="#resourceexists" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">resourceExists(String|Function|RegExp</span> <span class="pre">test)</span></code></p>
<p>Checks if a resource has been loaded. You can pass either a function, a string or a <code class="docutils literal"><span class="pre">RegExp</span></code> instance to perform the test:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.com/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">resourceExists</span><span class="p">(</span><span class="s1">&#39;logo3w.png&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Google logo loaded&#39;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Google logo not loaded&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to wait for a resource to be loaded, use the <a class="reference internal" href="#waitforresource">waitForResource()</a> method.</p>
</div>
</div>
<div class="section" id="run">
<span id="index-53"></span><h3><code class="docutils literal"><span class="pre">run()</span></code><a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">run(fn</span> <span class="pre">onComplete[,</span> <span class="pre">int</span> <span class="pre">time])</span></code></p>
<p>Runs the whole suite of steps and optionally executes a callback when they&#8217;ve all been done. Obviously, <strong>calling this method is mandatory</strong> in order to run the Casper navigation suite.</p>
<p>Casper suite <strong>won&#8217;t run</strong>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="c1">// hey, it&#39;s missing .run() here!</span>
</pre></div>
</div>
<p>Casper suite <strong>will run</strong>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Casper.run()</span></code> also accepts an <code class="docutils literal"><span class="pre">onComplete</span></code> callback, which you can consider as a custom final step to perform when all the other steps have been executed. Just don&#8217;t forget to <code class="docutils literal"><span class="pre">exit()</span></code> Casper if you define one!:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;So the whole suite ended.&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">exit</span><span class="p">();</span> <span class="c1">// &lt;--- don&#39;t forget me!</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Binding a callback to <code class="docutils literal"><span class="pre">complete.error</span></code> will trigger when the <code class="docutils literal"><span class="pre">onComplete</span></code> callback fails.</p>
</div>
<div class="section" id="scrollto">
<span id="index-54"></span><h3><code class="docutils literal"><span class="pre">scrollTo()</span></code><a class="headerlink" href="#scrollto" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">scrollTo(Number</span> <span class="pre">x,</span> <span class="pre">Number</span> <span class="pre">y)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1-beta3.</span></p>
</div>
<p>Scrolls current document to the coordinates defined by the value of <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">y</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This operation is synchronous.</p>
</div>
</div>
<div class="section" id="scrolltobottom">
<span id="index-55"></span><h3><code class="docutils literal"><span class="pre">scrollToBottom()</span></code><a class="headerlink" href="#scrolltobottom" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">scrollToBottom()</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1-beta3.</span></p>
</div>
<p>Scrolls current document to its bottom:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scrollToBottom</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This operation is synchronous.</p>
</div>
</div>
<div class="section" id="sendkeys">
<span id="index-56"></span><h3><code class="docutils literal"><span class="pre">sendKeys()</span></code><a class="headerlink" href="#sendkeys" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">sendKeys(Selector</span> <span class="pre">selector,</span> <span class="pre">String</span> <span class="pre">keys[,</span> <span class="pre">Object</span> <span class="pre">options])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Sends native keyboard events to the element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">&#39;form.contact input#name&#39;</span><span class="p">,</span> <span class="s1">&#39;Duke&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">&#39;form.contact textarea#message&#39;</span><span class="p">,</span> <span class="s2">&quot;Damn, I&#39;m looking good.&quot;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;form.contact input[type=&quot;submit&quot;]&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>The currently supported HTMLElements that can receive keyboard events from <code class="docutils literal"><span class="pre">sendKeys</span></code> are <code class="docutils literal"><span class="pre">&lt;input&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;textarea&gt;</span></code>, and any HTMLElement with attribute <code class="docutils literal"><span class="pre">contenteditable=&quot;true&quot;</span></code>.</p>
<div class="section" id="options">
<h4>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">(Boolean)</span> <span class="pre">reset</span></code>:</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1-beta3.</span></p>
</div>
<p>When set to <code class="docutils literal"><span class="pre">true</span></code>, this option will first empty the current field value. By default, it&#8217;s set to <code class="docutils literal"><span class="pre">false</span></code> and <code class="docutils literal"><span class="pre">sendKeys()</span></code> will just append string to the current field value.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">(Boolean)</span> <span class="pre">keepFocus</span></code>:</p>
<p><code class="docutils literal"><span class="pre">sendKeys()</span></code> by default will remove the focus on text input fields, which   will typically close autocomplete widgets. If you want to maintain focus, use   the <code class="docutils literal"><span class="pre">keepFocus</span></code> option. For example, if using jQuery-UI, you can click on   the first autocomplete suggestion using:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">&#39;form.contact input#name&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">keepFocus</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;form.contact ul.ui-autocomplete li.ui-menu-item:first-  child a&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">(String)</span> <span class="pre">modifiers</span></code>:</p>
<p><code class="docutils literal"><span class="pre">sendKeys()</span></code> accepts a <code class="docutils literal"><span class="pre">modifiers</span></code> option to support key modifiers. The   options is a string representing the composition of modifiers to use,   separated by the <code class="docutils literal"><span class="pre">+</span></code> character:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="s1">&#39;document&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">modifiers</span><span class="o">:</span> <span class="s1">&#39;ctrl+alt+shift&#39;</span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Available modifiers are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ctrl</span></code></li>
<li><code class="docutils literal"><span class="pre">alt</span></code></li>
<li><code class="docutils literal"><span class="pre">shift</span></code></li>
<li><code class="docutils literal"><span class="pre">meta</span></code></li>
<li><code class="docutils literal"><span class="pre">keypad</span></code></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="sethttpauth">
<span id="index-57"></span><h3><code class="docutils literal"><span class="pre">setHttpAuth()</span></code><a class="headerlink" href="#sethttpauth" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">setHttpAuth(String</span> <span class="pre">username,</span> <span class="pre">String</span> <span class="pre">password)</span></code></p>
<p>Sets <code class="docutils literal"><span class="pre">HTTP_AUTH_USER</span></code> and <code class="docutils literal"><span class="pre">HTTP_AUTH_PW</span></code> values for HTTP based authentication systems:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">setHttpAuth</span><span class="p">(</span><span class="s1">&#39;sheldon.cooper&#39;</span><span class="p">,</span> <span class="s1">&#39;b4z1ng4&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://password-protected.domain.tld/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m in. Bazinga.&quot;</span><span class="p">);</span>
<span class="p">})</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Of course you can directly pass the auth string in the url to open:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://sheldon.cooper:b4z1ng4@password-protected.domain.tld/&#39;</span><span class="p">;</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m in. Bazinga.&quot;</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="start">
<span id="index-58"></span><h3><code class="docutils literal"><span class="pre">start()</span></code><a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">start(String</span> <span class="pre">url[,</span> <span class="pre">Function</span> <span class="pre">then])</span></code></p>
<p>Configures and starts Casper, then open the provided <code class="docutils literal"><span class="pre">url</span></code> and optionally adds the step provided by the <code class="docutils literal"><span class="pre">then</span></code> argument:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m loaded.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m loaded.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Or alternatively:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">casper</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m loaded.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Matter of taste!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must call the <code class="docutils literal"><span class="pre">start()</span></code> method in order to be able to add navigation steps and run the suite. If you don&#8217;t you&#8217;ll get an error message inviting you to do so anyway.</p>
</div>
</div>
<div class="section" id="status">
<h3><code class="docutils literal"><span class="pre">status()</span></code><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">status(Boolean</span> <span class="pre">asString)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Returns the status of current Casper instance:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="then">
<span id="index-59"></span><h3><code class="docutils literal"><span class="pre">then()</span></code><a class="headerlink" href="#then" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">then(Function</span> <span class="pre">then)</span></code></p>
<p>This method is the standard way to add a new navigation step to the stack, by providing a simple function:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m in your google.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Now, let me write something&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Oh well.&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>You can add as many steps as you need. Note that the current <code class="docutils literal"><span class="pre">Casper</span></code> instance automatically binds the <code class="docutils literal"><span class="pre">this</span></code> keyword for you within step functions.</p>
<p>To run all the steps you defined, call the <a class="reference internal" href="#run">run()</a> method, and voila.</p>
<div class="admonition note" id="index-60">
<p class="first admonition-title">Note</p>
<p class="last">You must <a class="reference internal" href="#start">start()</a> the casper instance in order to use the <code class="docutils literal"><span class="pre">then()</span></code> method.</p>
</div>
<div class="topic">
<p class="topic-title first">Accessing the current HTTP response</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>You can access the current HTTP response object using the first parameter of your step callback:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">).</span><span class="nx">dump</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>That gives:</p>
<div class="highlight-text"><div class="highlight"><pre>$ casperjs dump-headers.js
{
    &quot;contentType&quot;: &quot;text/html; charset=UTF-8&quot;,
    &quot;headers&quot;: [
        {
            &quot;name&quot;: &quot;Date&quot;,
            &quot;value&quot;: &quot;Thu, 18 Oct 2012 08:17:29 GMT&quot;
        },
        {
            &quot;name&quot;: &quot;Expires&quot;,
            &quot;value&quot;: &quot;-1&quot;
        },
        // ... lots of other headers
    ],
    &quot;id&quot;: 1,
    &quot;redirectURL&quot;: null,
    &quot;stage&quot;: &quot;end&quot;,
    &quot;status&quot;: 200,
    &quot;statusText&quot;: &quot;OK&quot;,
    &quot;time&quot;: &quot;2012-10-18T08:17:37.068Z&quot;,
    &quot;url&quot;: &quot;http://www.google.fr/&quot;
}
</pre></div>
</div>
<p>So to fetch a particular header by its name:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://www.google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</div>
<p>That gives:</p>
<div class="highlight-text"><div class="highlight"><pre>$ casperjs dump-headers.js
Thu, 18 Oct 2012 08:26:34 GMT
</pre></div>
</div>
</div>
<div class="admonition warning" id="index-61">
<p class="first admonition-title">Warning</p>
<p>Step functions added to <cite>then()</cite> are processed in two different cases:</p>
<ol class="arabic simple">
<li>when the previous step function has been executed,</li>
<li>when the previous main HTTP request has been executed and the page <em>loaded</em>;</li>
</ol>
<p>Note that there&#8217;s no single definition of <em>page loaded</em>; is it when the <code class="docutils literal"><span class="pre">DOMReady</span></code> event has been triggered? Is it &#8220;all requests being finished&#8221;? Is it <a href="#id2"><span class="problematic" id="id3">*</span></a>all application logic being performed&#8221;? Or &#8220;all elements being rendered&#8221;? The answer always depends on the context. Hence why you&#8217;re encouraged to always use the <a class="reference internal" href="#waitfor">waitFor()</a> family methods to keep explicit control on what you actually expect.</p>
<p>A common trick is to use <a class="reference internal" href="#waitforselector">waitForSelector()</a>:</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://my.website.com/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s2">&quot;#plop&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m sure #plop is available in the DOM&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="thenbypass">
<span id="index-62"></span><h3><code class="docutils literal"><span class="pre">thenBypass()</span></code><a class="headerlink" href="#thenbypass" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenBypass(Number</span> <span class="pre">nb)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Adds a navigation step which will bypass a given number of following steps:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/&#39;</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">thenBypass</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// This test won&#39;t be executed</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Nor this one</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// While this one will</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="thenbypassif">
<h3><code class="docutils literal"><span class="pre">thenBypassIf()</span></code><a class="headerlink" href="#thenbypassif" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenBypassIf(Mixed</span> <span class="pre">condition,</span> <span class="pre">Number</span> <span class="pre">nb)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Bypass a given number of navigation steps if the provided condition is truthy or is a function that returns a truthy value:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">universe</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">answer</span><span class="o">:</span> <span class="mi">42</span>
<span class="p">};</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/&#39;</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">thenBypassIf</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">universe</span> <span class="o">&amp;&amp;</span> <span class="nx">universe</span><span class="p">.</span><span class="nx">answer</span> <span class="o">===</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">},</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// This step won&#39;t be executed as universe.answer is 42</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Nor this one</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// While this one will</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="thenbypassunless">
<h3><code class="docutils literal"><span class="pre">thenBypassUnless()</span></code><a class="headerlink" href="#thenbypassunless" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenBypassUnless(Mixed</span> <span class="pre">condition,</span> <span class="pre">Number</span> <span class="pre">nb)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Opposite of <a class="reference internal" href="#thenbypassif">thenBypassIf()</a>.</p>
</div>
<div class="section" id="thenclick">
<h3><code class="docutils literal"><span class="pre">thenClick()</span></code><a class="headerlink" href="#thenclick" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenClick(String</span> <span class="pre">selector[,</span> <span class="pre">Function</span> <span class="pre">then])</span></code></p>
<p>Adds a new navigation step to click a given selector and optionally add a new navigation step in a single operation:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// Click the first link in the casperJS page</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://casperjs.org/&#39;</span><span class="p">).</span><span class="nx">thenClick</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I clicked on first link found, the page is now loaded.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>This method is basically a convenient a shortcut for chaining a <a class="reference internal" href="#then">then()</a> and an <a class="reference internal" href="#click">click()</a> calls.</p>
</div>
<div class="section" id="thenevaluate">
<h3><code class="docutils literal"><span class="pre">thenEvaluate()</span></code><a class="headerlink" href="#thenevaluate" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenEvaluate(Function</span> <span class="pre">fn[,</span> <span class="pre">arg1[,</span> <span class="pre">arg2[,</span> <span class="pre">…]]])</span></code></p>
<p>Adds a new navigation step to perform code evaluation within the current retrieved page DOM:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// Querying for &quot;Chuck Norris&quot; on Google</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">).</span><span class="nx">thenEvaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;q&quot;]&#39;</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="nx">term</span><span class="p">);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;form[name=&quot;f&quot;]&#39;</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span>
<span class="p">},</span> <span class="s1">&#39;Chuck Norris&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>This method is a convenient shortcut for chaining <a class="reference internal" href="#then">then()</a> and <a class="reference internal" href="#evaluate">evaluate()</a> calls.</p>
</div>
<div class="section" id="thenopen">
<h3><code class="docutils literal"><span class="pre">thenOpen()</span></code><a class="headerlink" href="#thenopen" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenOpen(String</span> <span class="pre">location[,</span> <span class="pre">mixed</span> <span class="pre">options])</span></code></p>
<p>Adds a new navigation step for opening a new location, and optionally add a next step when its loaded:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m in your google.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://yahoo.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;Now I&#39;m in your yahoo.&quot;</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>You can also specify request settings by passing a setting object (see <a class="reference internal" href="#open">open()</a>) as the second argument:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://url.to/some/uri&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;chuck&#39;</span><span class="p">,</span>
        <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;n0rr15&#39;</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;POST request has been sent.&quot;</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="thenopenandevaluate">
<h3><code class="docutils literal"><span class="pre">thenOpenAndEvaluate()</span></code><a class="headerlink" href="#thenopenandevaluate" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">thenOpenAndEvaluate(String</span> <span class="pre">location[,</span> <span class="pre">Function</span> <span class="pre">then[,</span> <span class="pre">arg1[,</span> <span class="pre">arg2[,</span> <span class="pre">…]]])</span></code></p>
<p>Basically a shortcut for opening an url and evaluate code against remote DOM environment:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m in your google.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpenAndEvaluate</span><span class="p">(</span><span class="s1">&#39;http://yahoo.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">);</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input[name=q]&#39;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;chuck norris&#39;</span><span class="p">;</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">debugPage</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="tostring">
<h3><code class="docutils literal"><span class="pre">toString()</span></code><a class="headerlink" href="#tostring" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">toString()</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Returns a string representation of current Casper instance:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.fr/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// [object Casper], currently at http://google.fr/</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="unwait">
<h3><code class="docutils literal"><span class="pre">unwait()</span></code><a class="headerlink" href="#unwait" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">unwait()</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Abort all current waiting processes, if any.</p>
</div>
<div class="section" id="useragent">
<span id="index-63"></span><h3><code class="docutils literal"><span class="pre">userAgent()</span></code><a class="headerlink" href="#useragent" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">userAgent(String</span> <span class="pre">agent)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Sets the <a class="reference external" href="http://en.wikipedia.org/wiki/User-Agent">User-Agent string</a> to send through headers when performing requests:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">(</span><span class="s1">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X)&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://google.com/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m a Mac.&quot;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">(</span><span class="s1">&#39;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://google.com/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;m a PC.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="viewport">
<span id="index-64"></span><h3><code class="docutils literal"><span class="pre">viewport()</span></code><a class="headerlink" href="#viewport" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">viewport(Number</span> <span class="pre">width,</span> <span class="pre">Number</span> <span class="pre">height[,</span> <span class="pre">Function</span> <span class="pre">then])</span></code></p>
<p>Changes current viewport size:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">);</span>
</pre></div>
</div>
<p>To be sure page reflowing has occured, you have to use it asynchronously:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// new view port is now effective</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>As of 1.1 you can pass a <cite>then</cite> step function directly to <code class="docutils literal"><span class="pre">viewport()</span></code>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">viewport</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// new view port is effective</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PhantomJS comes with a default viewport size of 400x300, and CasperJS doesn&#8217;t override it by default.</p>
</div>
</div>
<div class="section" id="visible">
<span id="index-65"></span><h3><code class="docutils literal"><span class="pre">visible()</span></code><a class="headerlink" href="#visible" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">visible(String</span> <span class="pre">selector)</span></code></p>
<p>Checks if the DOM element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code> is visible in remote page:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://google.com/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visible</span><span class="p">(</span><span class="s1">&#39;#hplogo&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I can see the logo&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I can&#39;t see the logo&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="wait">
<span id="index-66"></span><h3><code class="docutils literal"><span class="pre">wait()</span></code><a class="headerlink" href="#wait" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">wait(Number</span> <span class="pre">timeout[,</span> <span class="pre">Function</span> <span class="pre">then])</span></code></p>
<p>Pause steps suite execution for a given amount of time, and optionally execute a step on done:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://yoursite.tld/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">wait</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;ve waited for a second.&quot;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>You can also write the same thing like this:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://yoursite.tld/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">wait</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I&#39;ve waited for a second.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="waitfor">
<span id="index-67"></span><h3><code class="docutils literal"><span class="pre">waitFor()</span></code><a class="headerlink" href="#waitfor" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitFor(Function</span> <span class="pre">testFx[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout,</span> <span class="pre">Object</span> <span class="pre">details])</span></code></p>
<p>Waits until a function returns true to process any next step.</p>
<p>You can also set a callback on timeout using the <code class="docutils literal"><span class="pre">onTimeout</span></code> argument, and set the timeout using the <code class="docutils literal"><span class="pre">timeout</span></code> one, in milliseconds. The default timeout is set to 5000ms:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://yoursite.tld/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">waitFor</span><span class="p">(</span><span class="kd">function</span> <span class="nx">check</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;ul.your-list li&#39;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">},</span> <span class="kd">function</span> <span class="nx">then</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">captureSelector</span><span class="p">(</span><span class="s1">&#39;yoursitelist.png&#39;</span><span class="p">,</span> <span class="s1">&#39;ul.your-list&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p>Example using the <code class="docutils literal"><span class="pre">onTimeout</span></code> callback:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://yoursite.tld/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">waitFor</span><span class="p">(</span><span class="kd">function</span> <span class="nx">check</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;ul.your-list li&#39;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">},</span> <span class="kd">function</span> <span class="nx">then</span><span class="p">()</span> <span class="p">{</span>    <span class="c1">// step to execute when check() is ok</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">captureSelector</span><span class="p">(</span><span class="s1">&#39;yoursitelist.png&#39;</span><span class="p">,</span> <span class="s1">&#39;ul.your-list&#39;</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span> <span class="nx">timeout</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// step to execute if check has failed</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;I can&#39;t haz my screenshot.&quot;</span><span class="p">).</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">details</span></code> is a property bag of various information that will be passed to the <code class="docutils literal"><span class="pre">waitFor.timeout</span></code> event, if it is emitted.
This can be used for better error messages or to conditionally ignore some timeout events.</p>
</div>
<div class="section" id="waitforalert">
<span id="index-68"></span><h3><code class="docutils literal"><span class="pre">waitForAlert()</span></code><a class="headerlink" href="#waitforalert" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForAlert(Function</span> <span class="pre">then[,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1-beta4.</span></p>
</div>
<p>Waits until a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Window.alert">JavaScript alert</a> is triggered. The step function will be passed the alert message in the <code class="docutils literal"><span class="pre">response.data</span></code> property:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">waitForAlert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;Alert received: &quot;</span> <span class="o">+</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<span class="target" id="casper-waitforpopup"></span></div>
<div class="section" id="waitforpopup">
<span id="index-69"></span><h3><code class="docutils literal"><span class="pre">waitForPopup()</span></code><a class="headerlink" href="#waitforpopup" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForPopup(String|RegExp</span> <span class="pre">urlPattern[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Waits for a popup having its url matching the provided pattern to be opened and loaded.</p>
<p>The currently loaded popups are available in the <code class="docutils literal"><span class="pre">Casper.popups</span></code> array-like property:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;Main page title&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">clickLabel</span><span class="p">(</span><span class="s1">&#39;Open me a popup&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// this will wait for the popup to be opened and loaded</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">waitForPopup</span><span class="p">(</span><span class="sr">/popup\.html$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertEquals</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">popups</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// this will set the popup DOM as the main active one only for time the</span>
<span class="c1">// step closure being executed</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">withPopup</span><span class="p">(</span><span class="sr">/popup\.html$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;Popup title&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// next step will automatically revert the current page to the initial one</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;Main page title&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="waitforresource">
<span id="index-70"></span><h3><code class="docutils literal"><span class="pre">waitForResource()</span></code><a class="headerlink" href="#waitforresource" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForResource(String|Function|RegExp</span> <span class="pre">testFx[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<p>Wait until a resource that matches a resource matching constraints defined by <code class="docutils literal"><span class="pre">testFx</span></code> are satisfied to process a next step.</p>
<p>The <code class="docutils literal"><span class="pre">testFx</span></code> argument can be either a string, a function or a <code class="docutils literal"><span class="pre">RegExp</span></code> instance:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">waitForResource</span><span class="p">(</span><span class="s2">&quot;foobar.png&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;foobar.png has been loaded.&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Using a regexp:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">waitForResource</span><span class="p">(</span><span class="sr">/foo(bar|baz)\.png$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;foobar.png or foobaz.png has been loaded.&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Using a function:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">waitForResource</span><span class="p">(</span><span class="kd">function</span> <span class="nx">testResource</span><span class="p">(</span><span class="nx">resource</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">resource</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;https&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">},</span> <span class="kd">function</span> <span class="nx">onReceived</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;a secure resource has been loaded.&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<span class="target" id="casper-waitforurl"></span></div>
<div class="section" id="waitforurl">
<span id="index-71"></span><h3><code class="docutils literal"><span class="pre">waitForUrl()</span></code><a class="headerlink" href="#waitforurl" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForUrl(String|RegExp</span> <span class="pre">url[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>Waits for the current page url to match the provided argument (<code class="docutils literal"><span class="pre">String</span></code> or <code class="docutils literal"><span class="pre">RegExp</span></code>):</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo/&#39;</span><span class="p">).</span><span class="nx">waitForUrl</span><span class="p">(</span><span class="sr">/login\.html$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;redirected to login.html&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="waitforselector">
<span id="index-72"></span><h3><code class="docutils literal"><span class="pre">waitForSelector()</span></code><a class="headerlink" href="#waitforselector" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForSelector(String</span> <span class="pre">selector[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<p>Waits until an element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code> exists in remote DOM to process any next step. Uses <a class="reference internal" href="#waitfor">waitFor()</a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;https://twitter.com/#!/n1k0&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">waitForSelector</span><span class="p">(</span><span class="s1">&#39;.tweet-row&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">captureSelector</span><span class="p">(</span><span class="s1">&#39;twitter.png&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="waitwhileselector">
<span id="index-73"></span><h3><code class="docutils literal"><span class="pre">waitWhileSelector()</span></code><a class="headerlink" href="#waitwhileselector" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitWhileSelector(String</span> <span class="pre">selector[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<p>Waits until an element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code> does not exist in remote DOM to process a next step. Uses <a class="reference internal" href="#waitfor">waitFor()</a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">waitWhileSelector</span><span class="p">(</span><span class="s1">&#39;.selector&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;.selector is no more!&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="waitforselectortextchange">
<h3><code class="docutils literal"><span class="pre">waitForSelectorTextChange()</span></code><a class="headerlink" href="#waitforselectortextchange" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForSelectorTextChange(String</span> <span class="pre">selectors[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<p>Waits until the text on an element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code>
is changed to a different value before processing the next step. Uses <a class="reference internal" href="#waitfor">waitFor()</a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/&#39;</span><span class="p">);</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">waitForSelectorTextChange</span><span class="p">(</span><span class="s1">&#39;.selector&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;The text on .selector has been changed.&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="waitfortext">
<h3><code class="docutils literal"><span class="pre">waitForText()</span></code><a class="headerlink" href="#waitfortext" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitForText(String</span> <span class="pre">text[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Waits until the passed text is present in the page contents before processing the immediate next step. Uses <a class="reference internal" href="#waitfor">waitFor()</a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://why.univer.se/&#39;</span><span class="p">).</span><span class="nx">waitForText</span><span class="p">(</span><span class="s2">&quot;42&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;Found the answer.&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="waituntilvisible">
<h3><code class="docutils literal"><span class="pre">waitUntilVisible()</span></code><a class="headerlink" href="#waituntilvisible" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitUntilVisible(String</span> <span class="pre">selector[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<p>Waits until an element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code> is visible in the remote DOM to process a next step. Uses <a class="reference internal" href="#waitfor">waitFor()</a>.</p>
</div>
<div class="section" id="waitwhilevisible">
<h3><code class="docutils literal"><span class="pre">waitWhileVisible()</span></code><a class="headerlink" href="#waitwhilevisible" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">waitWhileVisible(String</span> <span class="pre">selector[,</span> <span class="pre">Function</span> <span class="pre">then,</span> <span class="pre">Function</span> <span class="pre">onTimeout,</span> <span class="pre">Number</span> <span class="pre">timeout])</span></code></p>
<p>Waits until an element matching the provided <code class="xref doc docutils literal"><span class="pre">selector</span> <span class="pre">expression</span></code> is no longer visible in remote DOM to process a next step. Uses <a class="reference internal" href="#waitfor">waitFor()</a>.</p>
</div>
<div class="section" id="warn">
<h3><code class="docutils literal"><span class="pre">warn()</span></code><a class="headerlink" href="#warn" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">warn(String</span> <span class="pre">message)</span></code></p>
<p>Logs and prints a warning message to the standard output:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s2">&quot;I&#39;m a warning message.&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calling <code class="docutils literal"><span class="pre">warn()</span></code> will trigger the <code class="docutils literal"><span class="pre">warn</span></code> <span class="xref std std-ref">event</span>.</p>
</div>
</div>
<div class="section" id="withframe">
<span id="index-74"></span><h3><code class="docutils literal"><span class="pre">withFrame()</span></code><a class="headerlink" href="#withframe" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">withFrame(String|Number</span> <span class="pre">frameInfo,</span> <span class="pre">Function</span> <span class="pre">then)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Switches the main page to the frame having the name or frame index number matching the passed argument, and processes a step.</p>
<p>The page context switch only lasts until the step execution is finished:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;tests/site/frames.html&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;FRAMESET TITLE&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">withFrame</span><span class="p">(</span><span class="s1">&#39;frame1&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;FRAME TITLE&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">withFrame</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;FRAME TITLE&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;FRAMESET TITLE&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<span class="target" id="casper-withpopup"></span></div>
<div class="section" id="withpopup">
<span id="index-75"></span><h3><code class="docutils literal"><span class="pre">withPopup()</span></code><a class="headerlink" href="#withpopup" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">withPopup(Mixed</span> <span class="pre">popupInfo,</span> <span class="pre">Function</span> <span class="pre">then)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Switches the main page to a popup matching the information passed as argument, and processes a step. The page context switch only lasts until the step execution is finished:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;http://foo.bar/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;Main page title&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">clickLabel</span><span class="p">(</span><span class="s1">&#39;Open me a popup&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// this will wait for the popup to be opened and loaded</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">waitForPopup</span><span class="p">(</span><span class="sr">/popup\.html$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertEquals</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">popups</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// this will set the popup DOM as the main active one only for time the</span>
<span class="c1">// step closure being executed</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">withPopup</span><span class="p">(</span><span class="sr">/popup\.html$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;Popup title&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// next step will automatically revert the current page to the initial one</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">assertTitle</span><span class="p">(</span><span class="s1">&#39;Main page title&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The currently loaded popups are available in the <code class="docutils literal"><span class="pre">Casper.popups</span></code> array-like property.</p>
</div>
</div>
<div class="section" id="zoom">
<span id="index-76"></span><h3><code class="docutils literal"><span class="pre">zoom()</span></code><a class="headerlink" href="#zoom" title="Permalink to this headline">¶</a></h3>
<p><strong>Signature:</strong> <code class="docutils literal"><span class="pre">zoom(Number</span> <span class="pre">factor)</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<p>Sets the current page zoom factor:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;casper&#39;</span><span class="p">).</span><span class="nx">create</span><span class="p">();</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">().</span><span class="nx">zoom</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nx">thenOpen</span><span class="p">(</span><span class="s1">&#39;http://google.com&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">capture</span><span class="p">(</span><span class="s1">&#39;big-google.png&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Document Outline</a></h3>
  <ul>
<li><a class="reference internal" href="#">The <code class="docutils literal"><span class="pre">casper</span></code> module</a><ul>
<li><a class="reference internal" href="#the-casper-class">The <code class="docutils literal"><span class="pre">Casper</span></code> class</a></li>
<li><a class="reference internal" href="#index-1"><code class="docutils literal"><span class="pre">Casper.options</span></code></a><ul>
<li><a class="reference internal" href="#clientscripts"><code class="docutils literal"><span class="pre">clientScripts</span></code></a></li>
<li><a class="reference internal" href="#exitonerror"><code class="docutils literal"><span class="pre">exitOnError</span></code></a></li>
<li><a class="reference internal" href="#httpstatushandlers"><code class="docutils literal"><span class="pre">httpStatusHandlers</span></code></a></li>
<li><a class="reference internal" href="#loglevel"><code class="docutils literal"><span class="pre">logLevel</span></code></a></li>
<li><a class="reference internal" href="#onalert"><code class="docutils literal"><span class="pre">onAlert</span></code></a></li>
<li><a class="reference internal" href="#ondie"><code class="docutils literal"><span class="pre">onDie</span></code></a></li>
<li><a class="reference internal" href="#onerror"><code class="docutils literal"><span class="pre">onError</span></code></a></li>
<li><a class="reference internal" href="#onloaderror"><code class="docutils literal"><span class="pre">onLoadError</span></code></a></li>
<li><a class="reference internal" href="#onpageinitialized"><code class="docutils literal"><span class="pre">onPageInitialized</span></code></a></li>
<li><a class="reference internal" href="#onresourcereceived"><code class="docutils literal"><span class="pre">onResourceReceived</span></code></a></li>
<li><a class="reference internal" href="#onresourcerequested"><code class="docutils literal"><span class="pre">onResourceRequested</span></code></a></li>
<li><a class="reference internal" href="#onstepcomplete"><code class="docutils literal"><span class="pre">onStepComplete</span></code></a></li>
<li><a class="reference internal" href="#onsteptimeout"><code class="docutils literal"><span class="pre">onStepTimeout</span></code></a></li>
<li><a class="reference internal" href="#ontimeout"><code class="docutils literal"><span class="pre">onTimeout</span></code></a></li>
<li><a class="reference internal" href="#onwaittimeout"><code class="docutils literal"><span class="pre">onWaitTimeout</span></code></a></li>
<li><a class="reference internal" href="#page"><code class="docutils literal"><span class="pre">page</span></code></a></li>
<li><a class="reference internal" href="#pagesettings"><code class="docutils literal"><span class="pre">pageSettings</span></code></a></li>
<li><a class="reference internal" href="#remotescripts"><code class="docutils literal"><span class="pre">remoteScripts</span></code></a></li>
<li><a class="reference internal" href="#safelogs"><code class="docutils literal"><span class="pre">safeLogs</span></code></a></li>
<li><a class="reference internal" href="#silenterrors"><code class="docutils literal"><span class="pre">silentErrors</span></code></a></li>
<li><a class="reference internal" href="#steptimeout"><code class="docutils literal"><span class="pre">stepTimeout</span></code></a></li>
<li><a class="reference internal" href="#timeout"><code class="docutils literal"><span class="pre">timeout</span></code></a></li>
<li><a class="reference internal" href="#verbose"><code class="docutils literal"><span class="pre">verbose</span></code></a></li>
<li><a class="reference internal" href="#viewportsize"><code class="docutils literal"><span class="pre">viewportSize</span></code></a></li>
<li><a class="reference internal" href="#retrytimeout"><code class="docutils literal"><span class="pre">retryTimeout</span></code></a></li>
<li><a class="reference internal" href="#waittimeout"><code class="docutils literal"><span class="pre">waitTimeout</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#casper-prototype"><code class="docutils literal"><span class="pre">Casper</span></code> prototype</a><ul>
<li><a class="reference internal" href="#back"><code class="docutils literal"><span class="pre">back()</span></code></a></li>
<li><a class="reference internal" href="#base64encode"><code class="docutils literal"><span class="pre">base64encode()</span></code></a></li>
<li><a class="reference internal" href="#bypass"><code class="docutils literal"><span class="pre">bypass()</span></code></a></li>
<li><a class="reference internal" href="#click"><code class="docutils literal"><span class="pre">click()</span></code></a></li>
<li><a class="reference internal" href="#clicklabel"><code class="docutils literal"><span class="pre">clickLabel()</span></code></a></li>
<li><a class="reference internal" href="#capture"><code class="docutils literal"><span class="pre">capture()</span></code></a></li>
<li><a class="reference internal" href="#capturebase64"><code class="docutils literal"><span class="pre">captureBase64()</span></code></a></li>
<li><a class="reference internal" href="#captureselector"><code class="docutils literal"><span class="pre">captureSelector()</span></code></a></li>
<li><a class="reference internal" href="#clear"><code class="docutils literal"><span class="pre">clear()</span></code></a></li>
<li><a class="reference internal" href="#debughtml"><code class="docutils literal"><span class="pre">debugHTML()</span></code></a></li>
<li><a class="reference internal" href="#debugpage"><code class="docutils literal"><span class="pre">debugPage()</span></code></a></li>
<li><a class="reference internal" href="#die"><code class="docutils literal"><span class="pre">die()</span></code></a></li>
<li><a class="reference internal" href="#download"><code class="docutils literal"><span class="pre">download()</span></code></a></li>
<li><a class="reference internal" href="#each"><code class="docutils literal"><span class="pre">each()</span></code></a></li>
<li><a class="reference internal" href="#eachthen"><code class="docutils literal"><span class="pre">eachThen()</span></code></a></li>
<li><a class="reference internal" href="#echo"><code class="docutils literal"><span class="pre">echo()</span></code></a></li>
<li><a class="reference internal" href="#evaluate"><code class="docutils literal"><span class="pre">evaluate()</span></code></a></li>
<li><a class="reference internal" href="#evaluateordie"><code class="docutils literal"><span class="pre">evaluateOrDie()</span></code></a></li>
<li><a class="reference internal" href="#exit"><code class="docutils literal"><span class="pre">exit()</span></code></a></li>
<li><a class="reference internal" href="#exists"><code class="docutils literal"><span class="pre">exists()</span></code></a></li>
<li><a class="reference internal" href="#fetchtext"><code class="docutils literal"><span class="pre">fetchText()</span></code></a></li>
<li><a class="reference internal" href="#forward"><code class="docutils literal"><span class="pre">forward()</span></code></a></li>
<li><a class="reference internal" href="#log"><code class="docutils literal"><span class="pre">log()</span></code></a></li>
<li><a class="reference internal" href="#fill"><code class="docutils literal"><span class="pre">fill()</span></code></a></li>
<li><a class="reference internal" href="#fillselectors"><code class="docutils literal"><span class="pre">fillSelectors()</span></code></a></li>
<li><a class="reference internal" href="#filllabels"><code class="docutils literal"><span class="pre">fillLabels()</span></code></a></li>
<li><a class="reference internal" href="#fillxpath"><code class="docutils literal"><span class="pre">fillXPath()</span></code></a></li>
<li><a class="reference internal" href="#getcurrenturl"><code class="docutils literal"><span class="pre">getCurrentUrl()</span></code></a></li>
<li><a class="reference internal" href="#getelementattribute"><code class="docutils literal"><span class="pre">getElementAttribute()</span></code></a></li>
<li><a class="reference internal" href="#getelementsattribute"><code class="docutils literal"><span class="pre">getElementsAttribute()</span></code></a></li>
<li><a class="reference internal" href="#getelementbounds"><code class="docutils literal"><span class="pre">getElementBounds()</span></code></a></li>
<li><a class="reference internal" href="#getelementsbounds"><code class="docutils literal"><span class="pre">getElementsBounds()</span></code></a></li>
<li><a class="reference internal" href="#getelementinfo"><code class="docutils literal"><span class="pre">getElementInfo()</span></code></a></li>
<li><a class="reference internal" href="#getelementsinfo"><code class="docutils literal"><span class="pre">getElementsInfo()</span></code></a></li>
<li><a class="reference internal" href="#getformvalues"><code class="docutils literal"><span class="pre">getFormValues()</span></code></a></li>
<li><a class="reference internal" href="#getglobal"><code class="docutils literal"><span class="pre">getGlobal()</span></code></a></li>
<li><a class="reference internal" href="#gethtml"><code class="docutils literal"><span class="pre">getHTML()</span></code></a></li>
<li><a class="reference internal" href="#getpagecontent"><code class="docutils literal"><span class="pre">getPageContent()</span></code></a></li>
<li><a class="reference internal" href="#gettitle"><code class="docutils literal"><span class="pre">getTitle()</span></code></a></li>
<li><a class="reference internal" href="#mouseevent"><code class="docutils literal"><span class="pre">mouseEvent()</span></code></a></li>
<li><a class="reference internal" href="#open"><code class="docutils literal"><span class="pre">open()</span></code></a></li>
<li><a class="reference internal" href="#reload"><code class="docutils literal"><span class="pre">reload()</span></code></a></li>
<li><a class="reference internal" href="#repeat"><code class="docutils literal"><span class="pre">repeat()</span></code></a></li>
<li><a class="reference internal" href="#resourceexists"><code class="docutils literal"><span class="pre">resourceExists()</span></code></a></li>
<li><a class="reference internal" href="#run"><code class="docutils literal"><span class="pre">run()</span></code></a></li>
<li><a class="reference internal" href="#scrollto"><code class="docutils literal"><span class="pre">scrollTo()</span></code></a></li>
<li><a class="reference internal" href="#scrolltobottom"><code class="docutils literal"><span class="pre">scrollToBottom()</span></code></a></li>
<li><a class="reference internal" href="#sendkeys"><code class="docutils literal"><span class="pre">sendKeys()</span></code></a><ul>
<li><a class="reference internal" href="#options">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sethttpauth"><code class="docutils literal"><span class="pre">setHttpAuth()</span></code></a></li>
<li><a class="reference internal" href="#start"><code class="docutils literal"><span class="pre">start()</span></code></a></li>
<li><a class="reference internal" href="#status"><code class="docutils literal"><span class="pre">status()</span></code></a></li>
<li><a class="reference internal" href="#then"><code class="docutils literal"><span class="pre">then()</span></code></a></li>
<li><a class="reference internal" href="#thenbypass"><code class="docutils literal"><span class="pre">thenBypass()</span></code></a></li>
<li><a class="reference internal" href="#thenbypassif"><code class="docutils literal"><span class="pre">thenBypassIf()</span></code></a></li>
<li><a class="reference internal" href="#thenbypassunless"><code class="docutils literal"><span class="pre">thenBypassUnless()</span></code></a></li>
<li><a class="reference internal" href="#thenclick"><code class="docutils literal"><span class="pre">thenClick()</span></code></a></li>
<li><a class="reference internal" href="#thenevaluate"><code class="docutils literal"><span class="pre">thenEvaluate()</span></code></a></li>
<li><a class="reference internal" href="#thenopen"><code class="docutils literal"><span class="pre">thenOpen()</span></code></a></li>
<li><a class="reference internal" href="#thenopenandevaluate"><code class="docutils literal"><span class="pre">thenOpenAndEvaluate()</span></code></a></li>
<li><a class="reference internal" href="#tostring"><code class="docutils literal"><span class="pre">toString()</span></code></a></li>
<li><a class="reference internal" href="#unwait"><code class="docutils literal"><span class="pre">unwait()</span></code></a></li>
<li><a class="reference internal" href="#useragent"><code class="docutils literal"><span class="pre">userAgent()</span></code></a></li>
<li><a class="reference internal" href="#viewport"><code class="docutils literal"><span class="pre">viewport()</span></code></a></li>
<li><a class="reference internal" href="#visible"><code class="docutils literal"><span class="pre">visible()</span></code></a></li>
<li><a class="reference internal" href="#wait"><code class="docutils literal"><span class="pre">wait()</span></code></a></li>
<li><a class="reference internal" href="#waitfor"><code class="docutils literal"><span class="pre">waitFor()</span></code></a></li>
<li><a class="reference internal" href="#waitforalert"><code class="docutils literal"><span class="pre">waitForAlert()</span></code></a></li>
<li><a class="reference internal" href="#waitforpopup"><code class="docutils literal"><span class="pre">waitForPopup()</span></code></a></li>
<li><a class="reference internal" href="#waitforresource"><code class="docutils literal"><span class="pre">waitForResource()</span></code></a></li>
<li><a class="reference internal" href="#waitforurl"><code class="docutils literal"><span class="pre">waitForUrl()</span></code></a></li>
<li><a class="reference internal" href="#waitforselector"><code class="docutils literal"><span class="pre">waitForSelector()</span></code></a></li>
<li><a class="reference internal" href="#waitwhileselector"><code class="docutils literal"><span class="pre">waitWhileSelector()</span></code></a></li>
<li><a class="reference internal" href="#waitforselectortextchange"><code class="docutils literal"><span class="pre">waitForSelectorTextChange()</span></code></a></li>
<li><a class="reference internal" href="#waitfortext"><code class="docutils literal"><span class="pre">waitForText()</span></code></a></li>
<li><a class="reference internal" href="#waituntilvisible"><code class="docutils literal"><span class="pre">waitUntilVisible()</span></code></a></li>
<li><a class="reference internal" href="#waitwhilevisible"><code class="docutils literal"><span class="pre">waitWhileVisible()</span></code></a></li>
<li><a class="reference internal" href="#warn"><code class="docutils literal"><span class="pre">warn()</span></code></a></li>
<li><a class="reference internal" href="#withframe"><code class="docutils literal"><span class="pre">withFrame()</span></code></a></li>
<li><a class="reference internal" href="#withpopup"><code class="docutils literal"><span class="pre">withPopup()</span></code></a></li>
<li><a class="reference internal" href="#zoom"><code class="docutils literal"><span class="pre">zoom()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">The <code class="docutils literal"><span class="pre">casper</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="clientutils.html">The <code class="docutils literal"><span class="pre">clientutils</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="colorizer.html">The <code class="docutils literal"><span class="pre">colorizer</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mouse.html">The <code class="docutils literal"><span class="pre">mouse</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="tester.html">The <code class="docutils literal"><span class="pre">tester</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">The <code class="docutils literal"><span class="pre">utils</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading/index.html">Upgrading</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">API Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="clientutils.html"
                        title="next chapter">The <code class="docutils literal"><span class="pre">clientutils</span></code> module</a></p><h3>Index</h3>
<p><a href="../genindex.html">Thesaurus</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/modules/casper.txt"
           rel="nofollow">Show Source</a></li>
   
  </ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Donate</h3>
<div class="donate">
    <div class="paypal">
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHRwYJKoZIhvcNAQcEoIIHODCCBzQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYC4JCGS/3BUKEbRk75JLTu8saEZukn/6Zl5RMoVI55A2wpXdaYcILRy3L7CC4Exu9QaUzHTqQY5livIcptZaOM+aJYYr4ltJbyRW1hvFfrp0ZKMEgUuaU3m9+KQl4kzF9mRUIb5fwTd2j0FfEOllIDYLhEs6sCf39iI8yNeHsuTqjELMAkGBSsOAwIaBQAwgcQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIHb+LDTLRE8+AgaD85VPtS5//ZnqYKJMBxlWxI6ob8L8Zk71t9NAwDY3YB3phdkyYSQtax1QxSYz1zFdNlaN5+zlFVg3chctbR6W/kC1sf4hI+AVRm9JlwYKdPOE2FOescC7QuqwAiCZlTfdejznoE0B3aVfq4OMx2k0STtVv3Ld9prW57EtMZ7xDXIW5ss62IWpsBY8eW2VPbX/Xy8TncrpDLHzJ67OKmj/KoIIDhzCCA4MwggLsoAMCAQICAQAwDQYJKoZIhvcNAQEFBQAwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMB4XDTA0MDIxMzEwMTMxNVoXDTM1MDIxMzEwMTMxNVowgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDBR07d/ETMS1ycjtkpkvjXZe9k+6CieLuLsPumsJ7QC1odNz3sJiCbs2wC0nLE0uLGaEtXynIgRqIddYCHx88pb5HTXv4SZeuv0Rqq4+axW9PLAAATU8w04qqjaSXgbGLP3NmohqM6bV9kZZwZLR/klDaQGo1u9uDb9lr4Yn+rBQIDAQABo4HuMIHrMB0GA1UdDgQWBBSWn3y7xm8XvVk/UtcKG+wQ1mSUazCBuwYDVR0jBIGzMIGwgBSWn3y7xm8XvVk/UtcKG+wQ1mSUa6GBlKSBkTCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb22CAQAwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQCBXzpWmoBa5e9fo6ujionW1hUhPkOBakTr3YCDjbYfvJEiv/2P+IobhOGJr85+XHhN0v4gUkEDI8r2/rNk1m0GA8HKddvTjyGw/XqXa+LSTlDYkqI8OwR8GEYj4efEtcRpRYBxV8KxAW93YDWzFGvruKnnLbDAF6VR5w/cCMn5hzGCAZowggGWAgEBMIGUMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTIwNjI0MTUzOTU1WjAjBgkqhkiG9w0BCQQxFgQUCTlRbQ9Lu+bilBvGXOco0qlRC/8wDQYJKoZIhvcNAQEBBQAEgYBVibaMfUxJXJkA636MBqV4iWXc/F070Tsov5/kALg++/rD5qmH5MV6U8X0H8V1bCFZMBpTtLbCQ9xgeMjaK1gaCrvUw0503tBnvuPDz4bS1dspNHE9boiBJdN5vNZGqxXKij8CgKBeHYmcyCKjywHyUfSDADt1vgb7qQ5bOIvbzA==-----END PKCS7-----">
            <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Donate" title="Donate">
            <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1">
        </form>
        <small>(ghosts have bills, you know)</small>
    </div>
    <div class="flattr">
        <a href="http://flattr.com/thing/586241/CasperJS-a-navigation-scripting-and-testing-utility-for-PhantomJS" class="flattr" target="_blank"><img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0"></a>
    </div>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="clientutils.html" title="The clientutils module"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">USDA Nutrition Database 1.1.0-DEV documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Ontomatica.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>